Proceedings of the 6th EACL Workshop on Language Technology for Cultural Heritage, Social Sciences, and Humanities, pages 13?17,
Avignon, France, 24 April 2012. c?2012 Association for Computational Linguistics
BAD: An assistant tool for making verses in Basque
Manex Agirrezabal, In?aki Alegria, Bertol Arrieta
University of the Basque Country (UPV/EHU)
maguirrezaba008@ikasle.ehu.es, i.alegria@ehu.es, bertol@ehu.es
Mans Hulden
Ikerbasque (Basque Science Foundation)
mhulden@email.arizona.edu
Abstract
We present work on a verse-composition
assistant for composing, checking correct-
ness of, and singing traditional Basque
bertsoak?impromptu verses on particular
themes. A performing bertsolari?a verse
singer in the Basque Country?must ad-
here to strict rules that dictate the format
and content of the verses sung. To help
the aspiring bertsolari, we provide a tool
that includes a web interface that is able
to analyze, correct, provide suggestions and
synonyms, and tentatively also sing (using
text-to-speech synthesis) verses composed
by the user.
1 Introduction
In the Basque Country there exists a long-
standing live performance tradition of improvis-
ing verses?a type of ex tempore composition and
singing called bertsolaritza. Verses in bertsolar-
itza can be seen as discourses with strict rules
governing the technical structure of them: verses
must contain a certain number of lines and each
line must have a defined number of syllables, cer-
tain lines have to rhyme in certain patterns, and so
forth.
In this paper we present a web-based assistant
tool for constructing verses (bertsoak) according
to the rules of bertsolaritza (Garzia et al 2001).
If the reader is interested in this topic, we rec-
ommend watching the 2011 film Bertsolari1 2, di-
rected by Asier Altuna.
1IMDB: http://www.imdb.com/title/tt2058583
2Trailer on: http://vimeo.com/9355066
2 Relationship to earlier work
There exist some prior works dealing with Basque
verse-making and computer technologies, such as
BertsolariXa (Arrieta et al, 2001), which is a
rhyme search tool implemented as finite-state au-
tomata using the two-level morphology formal-
ism. The tool also contains other features, includ-
ing semantic categorization of words, narrowing
word-searches to certain themes, etc. While Bert-
solariXa focuses mostly on the word-level, the
current work also includes constraints on over-
all verse structure in its implementation as well
as a synonym search tool, a melody suggestion
system, and possibilities for plugging in text-to-
speech synthesis of verses.
2.1 The Bertsolari tradition
Bertsolaritza is very ingrained in the Basque
Country and championships, competitions and
get-togethers on bertsolaritza are quite common.
Usually the competitors in such event, called bert-
solaris, are given a theme to produce a verse on
under some very limited time constraints.
But the Basque Country is not the only place
that hosts such troubadour traditions?similar
customs are present in many other countries such
as Cuba, Brazil, Argentina, etc. The goal of the
current tool is to be generalizable, and so appli-
cable to various strategies of verse improvisation,
and possibly be useful not only for Basque speak-
ers, but also for others.
Below we briefly present an example of a verse
made in the Basque Country. In 1986 Andoni
Egan?a (a well-known bertsolari) was asked to
sing a bertso and assigned a topic. In the verse,
he was asked to play the role of an old person
who lived alone, and who realized that he could
13
not even tie his shoes. Within a few seconds he
composed and sang three verses. Here, we ana-
lyze the first verse.
Verse:
Gazte aroan ibili arren
gustora tirriki-tarra,
denbora honen joan etorriak
ederki jo dit gitarra,
gorputza daukat ximeldurikan
ta eskuen punta zaharra,
denborarekin seko galdu det
gazte aroko indarra,
ez al da pena gizon mardul bat
hola ibili beharra.
Translation:
Even when I was young
I was always on a spree
over time
I have been punished
I have a crumpled body
and the tip of the hands very old,
Over time I lost
the strength I had when I was young,
It?s a shame that a strong man
has to end up like me.
The special charm of bertsolaritza improvi-
sation is that people proficient in the art can
quickly express a variety of ideas, although they
are working with very restrictive rules concern-
ing the number of syllables in words they use,
and how the words must rhyme. We must take
into account that Andoni Egan?a was able to sing
this verse within a few seconds of being given
the topic, and also, that it complies exactly with
a certain metric. In this case, the verse contains
eight lines, each odd line consisting of ten sylla-
bles, and each even line of eight syllables, with
the even lines rhyming.
Formal training in the bertsolari tradition also
exists in the Basque Country. In the last 20 to
30 years, an important movement has developed
that aims to provide instruction to upcoming gen-
erations on how to create verses (orally or in
writing). This kind of instruction usually takes
place in learning centers called bertso-eskolak,
which in English roughly means, ?verse-making
schools.? The proliferation of this movement has
produced a strong base of young bertsolaris, of
whom many achieve an outstanding level of im-
provisation skills.
3 The BAD tool
BAD is the acronym for ?Bertsotarako Arbel Dig-
itala?, roughly ?Digital verse board.? The aim
of the tool is to serve as a general assistant for
bertsolari-style verse composition and help verse-
making learners in their learning process.
This tool has been developed using the PHP
programming language, but it contains certain
parts developed using finite-state technology. The
main functions of this tool, which will be dis-
cussed in more detail in the next five sections, are
the following: visualization of the verse structure,
structure checking, rhyme and synonym searching
and verse singing.
3.1 Verse structure
The main rules of the bertsolari verse are that a
verse must consist of a certain predefined number
of lines and each line in turn, of a predefined num-
ber of syllables. Traditionally, about a hundred
different schemes are used, and the tool provides
support for all these patterns. For example, the
structure called ?Hamarreko handia? has ten lines
and ten syllables in the odd-numbered lines, and
eight syllables in the even-numbered lines. In this
structure, the even-numbered lines have to rhyme.
Selecting this scheme, the tool will mark the cor-
responding lines with their requirements.
The web interface can be seen in figure 1,
which shows the general layout of the tool, illus-
trated with the example verse referred to above?
we see that each line has been approved in terms
of line length and syllable structure by the tool.
We have designed a database in which the main
verse structures are saved so that when the user se-
lects one verse schema, the system knows exactly
the number of lines it must contain, where must
it rhyme and how many syllables each line should
have. Those schemata are also linked to melodies,
each melody corresponding to one possible struc-
ture.
3.2 Structure checking
After writing the verse, the system can evaluate if
it is technically correct, i.e. if the overall structure
is correct and if each line in the form abides by the
required syllable count and rhyming scheme. The
syllable counter is implemented using the foma
software (Hulden, 2009), and the implementation
(Hulden, 2006) can be found on the homepage of
14
Figure 1: A verse written in the BAD web application.
foma.3
Separately, we have also developed a rhyme
checker, which extracts special patterns in the
lines that must rhyme and checks their confor-
mity.
These patterns are extracted using foma (see
section 3.4) after which some phonological rules
are applied. For example, an example rule era
? {era, eda, ega, eba}, models the fact that any
word ending in era, for example, etxera, will
rhyme with all words that end in era, eda, eba or
ega. These rhyming patterns have been extracted
according to the phonological laws described in
(Amuriza, 1981).
3.3 Synonym search
Usually, people who write verses tend to quickly
exhaust their vocabulary and ideas with to ex-
press what they want to say, or encounter prob-
lems with the number of syllables in various ten-
tative words they have in mind. For example,
if the verse-maker wants to say something con-
taining the word ?family,? (familia in Euskera, a
four-syllable word) but is forced to use a three-
syllable word in a particular context, the inter-
face provides for possibilities to look for three-
syllable synonyms of the word familia, producing
the word sendia? a word whose meaning is oth-
erwise the same, and made up of three syllables.
For developing the synonym search, we used a
modified version of the Basque Wordnet (Pociello
3http://foma.googlecode.com
et al, 2010), originally developed by the IXA
group at the University of the Basque Country.
Within Wordnet we search the synsets for the in-
coming word, and the words that correspond to
those synsets are returned.
3.4 Rhyme search
The classical and most well-known problem in
bertsolaritza concern the rhyming patterns. As
mentioned, various lines within a verse are re-
quired to rhyme, according to certain predefined
schemata. To search for words that rhyme with
other words in a verse, the BAD tool contains a
rhyme search engine. In the interface, this is lo-
cated in the right part of the BAD tool main view,
as seen in figure 2.
The rhyme searcher is built upon finite-state
technology, commonly used for developing mor-
phological and phonological analyzers, and calls
upon the freely available foma-tool, to calculate
matching and nonmatching rhyme schemes.
Its grammar is made up of regular expressions
that are used to identify phonological patterns in
final syllables in the input word. The result of
the search is the intersection of these patterns and
all the words generated from a morphological de-
scription of Basque (Alegria et al, 1996)?that
is, a list of all words that match both the required
phonological constraints given (rhyming) and a
morphological description of Basque.
Based upon figure 2, if we search rhymes for
the word landa (cottage), the system proposes a
15
Figure 2: The response of the rhyme search engine.
set of words that can be filtered depending on the
number of syllables required. Among this list of
words, we can find some words that end in anda,
such as, Irlanda (Ireland) or eztanda (explosion),
but through the application of phonological equiv-
alency rules we also find terms like ganga (vault).
3.5 Singing synthesis
Another characteristic, as mentioned, is that, in
the end, the verses are intended to be sung in-
stead of only being textually represented. Based
on other ongoing work in singing synthesis, we
have designed a system for singing the verses en-
tered into the system in Basque.
This is based on the ?singing mode? of the Fes-
tival text-to-speech system (Taylor et al, 1998).
The advantage of using this is that Festival is
open-source and has given us ample opportunities
to modify its behavior. However, as Festival does
not currently support Basque directly, we have re-
lied on the Spanish support of the Festival sys-
tem.4
4While morphologically and syntactically, Spanish and
Basque have no relationship whatsoever, phonetically the
languages are quite close, with only a few phonemes, syl-
Based on current work by the Aholab research
team in Bilbao?a lab that works on Basque
speech synthesis and recognition?we have im-
plemented a singing module for BAD, based on
the text-to-speech HTS engine (Erro et al, 2010).
Our application is able to sing the composed
verses entered into the system in Basque, with a
choice of various standard melodies for bertsolar-
itza.5
4 Discussion and future work
Now that the BAD tool has been developed, our
intention is to evaluate it. To make a qualita-
tive evaluation we have gotten in touch with some
verse-making schools (bertso-eskola), so that they
can test the system and send us their feedback us-
ing a form. Once the evaluation is made, we will
improve it according to the feedback and the sys-
tem will be made public.
Our ultimate goal is to develop a system able to
create verses automatically. To achieve this long-
term goal, there is plenty of work to do and ba-
sic research to be done. We have in our hands a
good corpus of 3,500 Basque verse transcriptions,
so we intend to study these verses from a mor-
phological, syntactical, semantical and pragmatic
point of view.
In the short term, we also plan to expand the
synonym search to be able to provide searches
for semantically related words and subjects (and
not just synonyms), like hypernyms or hyponyms.
The Basque WordNet provides a good opportu-
nity for this, as one is easily able to traverse the
WordNet to encounter words with varying degrees
of semantic similarity.
Another feature that we want to develop is a
system that receives as input a verse together with
a MIDI file, and where the system automatically
sings the verse to the music provided.
Finally, in order for the system to be
able to provide better proposals for the verse
artist?including perhaps humorous and creative
proposals?we intend to work with approaches
to computational creativity. We are considering
different approaches to this topic, such as in the
work on Hahacronym (Stock et al, 2005) or the
Standup riddle builder (Ritchie et al, 2001).
labification rules, and stress rules being different enough to
disturb the system?s behavior.
5However, this functionality is not available on the web
interface as of yet.
16
Figure 3: The BAD application before entering a verse, showing two possible rhyme patterns.
Acknowledgments
This research has been partially funded by the
Basque Government (Research Groups, IT344-
10).
References
In?aki Alegria, Xabier Artola, Kepa Sarasola and
Miriam Urkia, ?Automatic morphological analysis
of Basque?, Literary and Linguistic Computing,
ALLC, 1996
Xabier Amuriza, ?Hiztegi errimatua?, Alfabetatze Eu-
skalduntze Koordinakundea, 1981
Bertol Arrieta, In?aki Alegria, Xabier Arregi, ?An as-
sistant tool for Verse-Making in Basque based on
Two-Level Morphology?, 2001
Daniel Erro, In?aki Sainz, Ibon Saratxaga, Eva Navas,
Inma Herna?ez, ?MFCC+F0 Extraction and Wave-
form Reconstruction using HNM: Preliminary Re-
sults in an HMM-based Synthesizer?, 2010
Joxerra Garzia, Jon Sarasua, and Andoni Egan?a,
?The art of bertsolaritza: improvised Basque verse
singing?, Bertsolari liburuak, 2001
John E. Hopcroft, Rajeev Motwani, Jeffrey D. Ullman,
?Introduccio?n a la teor??a de Auto?matas, Lenguajes
y Computacio?n?, Pearson educacio?n, 2002
Mans Hulden, ?Foma: a finite-state compiler and li-
brary?, Proceedings of the 12th Conference of the
European Chapter of the Association for Computa-
tional Linguistics: Demonstrations Session, p. 29?
32, 2009
Mans Hulden, ?Finite-state syllabification?, Finite-
State Methods and Natural Language Processing, p.
86 ? 96, Springer, 2006
Kimmo Koskenniemi. ?Two-level morphology: A
general computational model for word-form recog-
nition and production?. Publication 11, University
of Helsinki, Department of General Linguistics,
Helsinki, 1983.
Eli Pociello, Eneko Agirre, Izaskun Aldezabal,
?Methodology and construction of the Basque
WordNet?, 2010
Graeme Ritchie, ?Current directions in computational
humour?, Artificial Intelligence Review, Volume
16, Number 2, p. 119 ? 135, Springer, 2001
Graeme Ritchie, Ruli Manurung, Helen Pain, Annalu
Waller, Dave O?Mara, ?The STANDUP interactive
riddle builder?, Volume 2, Number 2, p. 67 ? 69,
IEEE Intelligent Systems, 2006
Oliviero Stock and Carlo Strapparava, ?Hahacronym:
A computational humor system?, Proceedings of
the ACL 2005 on Interactive poster and demonstra-
tion sessions, p. 113 ? 116, Association for Compu-
tational Linguistics, 2005
Paul Taylor, Alan W. Black and Richard Caley, ?The
architecture of the Festival speech synthesis sys-
tem?, International Speech Communication Asso-
ciation, 1998
17
Proceedings of the 10th International Workshop on Finite State Methods and Natural Language Processing, pages 35?39,
Donostia?San Sebastia?n, July 23?25, 2012. c?2012 Association for Computational Linguistics
Finite-state technology in a verse-making tool
Manex Agirrezabal, In?aki Alegria, Bertol Arrieta
University of the Basque Country (UPV/EHU)
maguirrezaba008@ikasle.ehu.es, i.alegria@ehu.es, bertol@ehu.es
Mans Hulden
Ikerbasque (Basque Science Foundation)
mhulden@email.arizona.edu
Abstract
This paper presents a set of tools designed to
assist traditional Basque verse writers during
the composition process. In this article we
are going to focus on the parts that have been
created using finite-state technology: this in-
cludes tools such as syllable counters, rhyme
checkers and a rhyme search utility.
1 The BAD tool and the Basque singing
tradition
The BAD tool is an assistant tool for verse-makers
in the Basque bertsolari tradition. This is a form
of improvised verse composition and singing where
participants are asked to produce impromptu com-
positions around themes which are given to them
following one of many alternative verse formats.
The variety of verse schemata that exist all impose
fairly strict structural requirements on the composer.
Verses in the bertsolari tradition must consist of a
specified number of lines, each with a fixed num-
ber of syllables. Also, strict rhyme patterns must
be followed. The structural requirements are con-
sidered the most difficult element in the bertsolar-
itza?however, well-trained bertsolaris can usually
produce verses that fulfill the structural prerequisites
in a very limited time.
The BAD tool presented here is mainly di-
rected at those with less experience in the tradi-
tion such as students. One particular target group
are the bertso-eskola-s (verse-making schools) that
have been growing in popularity?these are schools
found throughout the Basque Country that train
young people in the art of bertsolaritza.
The primary functionality of the tool is illustrated
in figure 1 which shows the main view of the util-
ity. The user is offered a form in which a verse
can be written, after which the system checks the
technical correctness of the poem. To perform this
task, several finite state transducer-based modules,
are used, some of them involving the metrics (syl-
lable counter) of the verse, and others the rhyme
(rhyme searcher and checker). The tool has support
for 150 well known verse meters.
In the following sections, we will outline the tech-
nology used in each of the parts in the system.
2 Related work
Much of the existing technology for Basque mor-
phology and phonology uses finite-state technology,
including earlier work on rhyme patterns (Arrieta
et al, 2001). In our work, we have used the Basque
morphological description (Alegria et al, 1996) in
the rhyme search module. Arrieta et al (2001) de-
velop a system where, among other things, users can
search for words that rhyme with an introduced pat-
tern. It is implemented in the formalism of two-level
morphology (Koskenniemi, 1983) and compiled into
finite-state transducers.
We have used the open-source foma finite-state
compiler to develop all the finite-state based parts
of our tool.1. After compiling the transducers, we
use them in our own application through the C/C++
API provided with foma.
3 Syllable counter
As mentioned, each line in a verse must contain a
specified number of syllables. The syllable counter
module that checks whether this is the case consists
of a submodule that performs the syllabification it-
self as well as a module that yields variants produced
by optional apocope and syncope effects. For the
syllabification itself, we use the approach described
in Hulden (2006), with some modifications to cap-
ture Basque phonology.
1In our examples, FST expressions are written using foma
syntax. For details, visit http://foma.googlecode.com
35
Figure 1: A verse written in the BAD web application.
3.1 Syllabification
Basque syllables can be modeled by assuming a
maximum onset principle together with a sonority
hierarchy where obstruents are the least sonorous el-
ement, followed in sonority by the liquids, the nasals
and the glides. The syllable nuclei are always a sin-
gle vowel (a,e,i,o,u) or a combination of a low vowel
(a,e) and a high vowel (i,o,u) or a high vowel and an-
other high vowel.
The syllabifier relies on a chain of composed re-
placement rules (Beesley and Karttunen, 2003) com-
piled into finite-state transducers. These defini-
tions are shown in figure 2. The overall strategy
is to first mark off the nuclei in a word by the rule
MarkNuclei which takes advantage of a left-to-
right longest replacement rule. This is to ensure that
diphthongs do not get split into separate syllables
by the subsequent syllabification process. Follow-
ing this, syllables are marked off by the markSyll-
rule, which inserts periods after legitimate syllables.
This rule takes advantage of the shortest-leftmost re-
placement strategy?in effect minimizing the coda
and maximizing the size of the onset of a syllable to
the extent permitted by the allowed onsets and co-
das, defined in Onset and Coda, respectively.
To illustrate this process, supposing that we
are syllabifying the Basque word intransitiboa.
The first step in the syllabification process is
to mark the nuclei in the word, resulting in
{i}ntr{a}ns{i}t{i}b{o}{a}. In the more com-
plex syllabification step, the markSyll rule as-
sures that the juncture ntr gets divided as n.tr be-
cause nt.r would produce a non-maximal onset,
and i.ntr would in turn produce an illegal onset in
define Obs [f|h|j|k|p|s|t|t s|t z|t x|x|
z|b|d|g|v|d d|t t];
define LiqNasGli [l|r|r r|y|n|m];
define LowV [a|e|o];
define HighV [i|u];
define V LowV | HighV;
define Nucleus [V | LowV HighV |
[HighV HighV - [i i] - [u u]]];
define Onset (Obs) (LiqNasGli);
define Coda C?<4;
define MarkNuclei Nucleus @-> %{ ... %};
define Syll Onset %{ Nucleus %} Coda;
define markSyll Syll @> ... "." || _ Syll ;
define cleanUp %{|%} -> 0;
regex MarkNuclei .o. markSyll .o. cleanUp;
Figure 2: Syllable definition
the second syllable. The final syllabification, af-
ter markup removal by the Cleanup rule, is then
in.tran.si.ti.bo.a. This process is illustrated in fig-
ure 3
In bertsolaritza, Basque verse-makers follow this
type of syllable counting in the majority if cases;
however, there is some flexibility as regards the syl-
labification process. For example, suppose that the
phrase ta lehenengo urtian needs to fit a line which
must contain six syllables. If we count the sylla-
bles using the algorithm shown above, we receive a
count of eight (ta le.hen.en.go ur.ti.an). However,
in the word lehenengo we can identify the syncope
pattern vowel-h-vowel, with the two vowels being
identical. In such cases, we may simply replace
the entire sequence by a single vowel (ehe ? e).
This is phonetically equivalent to shortening the ehe-
sequence (for those dialects where the orthographi-
cal h is silent). With this modification, we can fit
36
the line in a 7 syllable structure. We can, however,
further reduce the line to 6 syllables by a second
type of process that merges the last syllable of one
word with the first of the next one and then resyl-
labifying. Hence, ta lehenengo urtian, using the
modifications explained above, could be reduced to
ta.le.nen.gour.ti.an, which would fit the 6 syllable
structure. This production of syllabification variants
is shown in figure 4.
transformazioei
tr{a}nsf{o}rm{a}z{i}{o}{ei}
markNuclei
syllabify
tr{a}ns.f{o}r.m{a}.z{i}.{o}.{ei}
cleanUp
trans.for.ma.zi.o.ei
Figure 3: Normal syllabification.
trarnsfomn
trzarnzsfzomn
marrkNuculkeuis
kreybskeym
trzarnzsfzomn trnzsfzomn
tratnsftronnm
tzratznsftzroznnm
marrkNuculkeuis
kreybskeym
tzratznsftzroznnm tzratznstzroznnm
Figure 4: Flexible syllabification.
4 Finite-state technology for rhymes
4.1 Basque rhyme patterns and rules
Similar to the flexibility in syllabification, Basque
rhyme schemes also allows for a certain amount
of leeway that bertsolaris can take advantage of.
The widely consulted rhyming dictionary Hiztegi
Errimatua (Amuriza, 1981) contains documented a
number of phonological alternations that are accept-
able as off-rhymes: for example the stops p, t, and k
are often interchangeable, as are some other phono-
logical groups. Figure 5 illustrates the definitions
for interchangeable phonemes when rhyming. The
interchangeability is done as a prelude to rhyme
checking, whereby phonemes in certain groups,
such as p, are replaced by an abstract symbol de-
noting the group (e.g. PTK).
4.2 Rhyme checker
The rhyme checker itself in BAD was originally de-
veloped as a php-script, and then reimplemented as
define plosvl [p | t | k];
define rplosv [b | d | g | r];
define sib [s | z | x];
define nas [n | m];
define plosvlconv ptk -> PTK;
define rplosvconv bdgr -> BDGR;
define sibconv sib -> SZX;
define nasconv nas -> NM;
define phoRules plosvlconv .o. rplosvconv .o.
sibconv .o. nasconv ;
Figure 5: Conflation of consonant groups before rhyme
checking.
a purely finite-state system. In this section we will
focus on the finite-state based one.
As the php version takes advantage of syllabifica-
tion, the one developed with transducers does not.
Instead, it relies on a series of replacement rules and
the special eq() operator available in foma. An
implementation of this is given in figure 6. As input
to the system, the two words to be checked are as-
sumed to be provided one after the other, joined by
a hyphen. Then, the system (by rule rhympat1)
identifies the segments that do not participate in the
rhyme and marks them off with ?{? and ?}? symbols
(e.g. landa-ganga ? <{l}anda>-<{g}anga>).
The third rule (rhympat3) removes everything
that is between ?{? and ?}?, leaving us only with
the segments relevant for the rhyming pattern (e.g.
<anda>-<anga>). Subsequent to this rule, we
apply the phonological grouping reductions men-
tioned above in section 4.1, producing, for example
(<aNMBDGRa>-<aNMBDGRa>).
After this reduction, we use the eq(X,L,R)-
operator in foma, which from a transducer X, filters
out those words in the output where material be-
tween the specified delimiter symbols L and R are
unequal. In our case, we use the < and > symbols
as delimiters, yielding a final transducer that does
not accept non-rhyming words.
4.3 Rhyme search
The BAD tool also includes a component for search-
ing words that rhyme with a given word. It is devel-
oped in php and uses a finite-state component like-
wise developed with foma.
Similarly to the techniques previously described,
it relies on extracting the segments relevant to the
37
define rhympat1 [0:"{" ?* 0:"}"
[[[V+ C+] (V) V] | [(C) V V]] C* ];
# constraining V V C pattern
define rhympat2 ?[?* V "}" V C];
# cleaning non-rhyme part
define rhympat3 "{" ?* "}" -> 0;
define rhympat rhympat1 .o. rhympat2 .o.
rhympat3;
# rhyming pattern on each word
# and phonological changes
define MarkPattern rhympat .o.
phoRules .o. patroiak;
# verifying if elements between < and >
# are equal
define MarkTwoPatterns
0:%< MarkPattern 0:%> %-
0:%< MarkPattern 0:%> ;
define Verify _eq(MarkTwoPatterns, %<, %>)
regex Verify .o. Clean;
Figure 6: Rhyme checking using foma.
rhyme, after which phonological rules are applied
(as in 4.1) to yield phonetically related forms. For
example, introducing the pattern era, the system re-
turns four phonetically similar forms era, eda, ega,
and eba. Then, these responses are fed to a trans-
ducer that returns a list of words with the same end-
ings. To this end, we take advantage of a finite-state
morphological description of Basque (Alegria et al,
1996).
As this transducer returns a set of words which
may be very comprehensive?including words not
commonly used, or very long compounds?we then
apply a frequency-based filter to reduce the set of
possible rhymes. To construct the filter, we used
a newspaper corpus, (Egunkaria2) and extracted the
frequencies of each word form. Using the frequency
counts, we defined a transducer that returns a word?s
frequency, using which we can extract only the n-
most frequent candidates for rhymes. The system
also offers the possibility to limit the number of syl-
lables that desired rhyming words may contain. The
syllable filtering system and the frequency limiting
parts have been developed in php. Figure 7 shows
the principle of the rhyme search?s finite-state com-
ponent.
5 Evaluation
As we had available to us a rhyme checker written
in php before implementing the finite-state version,
2http://berria.info
regex phoRules .o. phoRules.i .o.
0:?* ?* .o. dictionary ;
Figure 7: Rhyme search using foma
it allowed for a comparison of the application speed
of each. We ran an experiment introducing 250,000
pairs of words to the two rhyme checkers and mea-
sured the time each system needed to reply. The
FST-based checker was roughly 25 times faster than
the one developed in php.
It is also important to mention that these tools
are going to be evaluated in an academic environ-
ment. As that evaluation has not been done yet, we
made another evaluation in our NLP group in or-
der to detect errors in terms of syllabification and
rhyme quality. The general feeling of the experiment
was that the BAD tool works well, but we had some
efficiency problems when many people worked to-
gether. To face this problem some tools are being
implemented as a server.
6 Discussion & Future work
Once the main tools of the BAD have been devel-
oped, we intend to focus on two different lines of
development. The first one is to extend to flexibil-
ity of rhyme checking. There are as of yet patterns
which are acceptable as rhymes to bertsolaris that
the system does not yet recognize. For example,
the words filma and errima will not be accepted by
the current system, as the two rhymes ilma and ima
are deemed to be incompatible. In reality, these two
words are acceptable as rhymes by bertsolaris, as
the l is not very phonetically prominent. However,
adding flexibility also involves controlling for over-
generation in rhymes. Other reduction patterns not
currently covered by the system include phenomena
such as synaloepha?omission of vowels at word
boundaries when one word ends and the next one
begins with a vowel.
Also, we intend to include a catalogue of melodies
in the system. These are traditional melodies that
usually go along with a specific meter. Some 3,000
melodies are catalogued (Dorronsoro, 1995). We are
also using the components described in this article in
another project whose aim is to construct a robot ca-
pable to find, generate and sing verses automatically.
38
Acknowledgments
This research has been partially funded by the Span-
ish Ministry of Education and Science (OpenMT-
2, TIN2009-14675-C03) and partially funded by the
Basque Government (Research Groups, IT344-10).
We would like to acknowledge Aitzol Astigarraga
for his help in the development of this project. He
has been instrumental in our work, and we intend to
continue working with him. Also we must mention
the Association of Friends of Bertsolaritza, whose
verse corpora has been used to test and develop these
tools and to develop new ones.
References
Alegria, I., Artola, X., Sarasola, K., and Urkia,
M. (1996). Automatic morphological analysis
of Basque. Literary and Linguistic Computing,
11(4):193?203.
Amuriza, X. (1981). Hiztegi errimatua [Rhyme Dic-
tionary]. Alfabetatze Euskalduntze Koordinakun-
dea.
Arrieta, B., Alegria, I., and Arregi, X. (2001). An
assistant tool for verse-making in Basque based
on two-level morphology. Literary and linguistic
computing, 16(1):29?43.
Beesley, K. R. and Karttunen, L. (2003). Finite state
morphology. CSLI.
Dorronsoro, J. (1995). Bertso doinutegia [Verse
melodies repository]. Euskal Herriko Bertsolari
Elkartea.
Hulden, M. (2006). Finite-state syllabification.
Finite-State Methods and Natural Language Pro-
cessing, pages 86?96.
Koskenniemi, K. (1983). Two-level morphology:
A general computational model for word-form
production and generation. Publications of the
Department of General Linguistics, University of
Helsinki. Helsinki: University of Helsinki.
39
Proceedings of the 14th European Workshop on Natural Language Generation, pages 162?166,
Sofia, Bulgaria, August 8-9 2013. c?2013 Association for Computational Linguistics
POS-tag based poetry generation with WordNet
Manex Agirrezabal, Bertol Arrieta, Aitzol Astigarraga
University of the Basque Country (UPV/EHU)
IXA NLP Group
Dept. of Computer Science
20018 Donostia
sgpagzam@ehu.es
bertol@ehu.es
aitzol.astigarraga@ehu.es
Mans Hulden
University of Helsinki
Department of Modern Languages
Helsinki, Finland
mhulden@email.arizona.edu
Abstract
In this paper we present the preliminary work of
a Basque poetry generation system. Basically,
we have extracted the POS-tag sequences from
some verse corpora and calculated the probabil-
ity of each sequence. For the generation process
we have defined 3 different experiments: Based
on a strophe from the corpora, we (a) replace
each word with other according to its POS-tag
and suffixes, (b) replace each noun and adjective
with another equally inflected word and (c) re-
place only nouns with semantically related ones
(inflected). Finally we evaluate those strategies
using a Turing Test-like evaluation.
1 Introduction
Poetry generation is one of the dream tasks of Natural
Language Processing (NLP). In this text we point out
an approach to generate Basque strophes automatically
using some corpora, morphological information and
a lexical database. The presented method is not tied
to a specific language, but it is especially suitable for
inflected languages, as the POS information used in
some tasks with success in non inflected languages is
not enough for inflected ones. We have used the POS-
tags with their inflectional information to learn usual
structures in Basque poetry.
This work is part of a more general and complete
project, called BertsoBOT (Astigarraga et al, 2013).
BertsoBOT is a robot capable of creating and singing
Basque verses automatically. The robot joins together
in a single system techniques from robotics, NLP and
speech synthesis and recognition. The work presented
in this paper comes to improve the generation module
of the mentioned system.
Although our intention is to create whole verses, in
this paper we present the first steps towards it: the cre-
ation of strophes. Additionally, Basque verses have
to rhyme, but in these first experiments we have not
considered it.
Basque language
Basque language is spoken along the Basque Country1
by approximately 700.000 people. Although there is a
standardized form of the language, it is common the use
of non-standard dialects in certain regions, mainly in
spoken language.
Basque is a morphologically rich language, which is
an obvious feature if we analyze the multiple declension
cases2 that can be usedwith only oneword. For example,
the phrase ?with the friends? can be expressed with only
one word, ?lagunekin?.
lagunekin = lagun (friend) + ak (plural determiner) +
kin (with)
Art of bertsolaritza
The art of impromptu verse-making, bertsolaritza, is
very ingrained in the BasqueCountry. The performances
of verse-makers are quite usual and a big championship
is held every four years which congregates 15.000 peo-
ple, approximately. One tipical work to do for the verse-
makers is to sing verses extempore, given a topic. The
particularity of these verses is that they have to follow
strict constraints of meter and rhyme. In the case of
a metric structure of verses known as ?zortziko txikia?
1http://en.wikipedia.org/wiki/Basque Country (greater region)
2en.wikipedia.org/wiki/Basque grammar#Declension
162
(small of eight), the poem must have eight lines. The
union of each odd line with the next even line, form a
strophe. Each strophe, has a small structure3 and must
rhyme with the others. Below, you can see an example
of a verse, with lauko txikia4 stanza:
Neurriz eta errimaz With meter and rhyme
kantatzea hitza, to sing the word
horra hor ze kirol mota bertsolaritza is
den bertsolaritza. that kind of sport
2 State of the art
A good review of computer guided poetry can be found
in (Gerva?s, 2010). Most relevant ones include:
WASP
The WASP system (Gerva?s, 2000) can be considered
one of first serious attempts to build an automatic poetry
generator system. It is based on the generate-and-test
paradigm of problem solving. Simple solutions are
generated and then coupled with an evaluation function
for metric constraints, producing acceptable results.
ASPERA
ASPERA (Gerva?s, 2001) is a case-based reasoning
(CBR) system for poetry generation. It generates poetry
based on the information provided by the user: a prose
description of the intended message, a specific stanza
for the final poem, a set of verse examples on that stanza,
and a group of words that the final poem must contain.
The system was implemented using CLIPS rule-
based system, and follows the four typical CBR steps:
Retrieval, Reuse, Revise and Retain.
POEVOLVE
Levy (Levy, 2001) went on to develop an evolution-
ary model of poetry generation. POEVOLVE creates
limericks taking as a reference the human way of poetry
writing. The POEVOLVE system works as follows:
an initial population is created from a group of words
that include phonetic and stress information. Rhymes
that meet the requirements are selected and then more
words are selected to fill the rest of the verse-line
based on their stress information. A genetic algorithm
is employed to modify the words that compose the
313 syllables with a caesura after the 7th syllable
4Lauko txikia: The same as zortziko txikia but with four lines,
instead of eight.
limerick. Evaluation is performed by a neural network
trained on human judgements. It must be said that this
system does not take syntax and semantics into account.
McGonnagall
Manurung presented also an evolutionary approach
to generate poetry (Manurung, 2003). The poem gen-
eration process is formulated as a state space search
problem using stochastic hill-climbing. The overall pro-
cess is divided in two steps: evaluation and evolution.
During the evaluation phase, a group of individuals is
formed based on initial information, target semantics
and target phonetics. This group of initial individuals
is then evaluated taking into account different aspects
such as phonetics, semantics and surface form. Each
individual receives a score, and in the evolution step, the
subset with higher scores is selected for reproduction.
The resulting mutated individuals derive, hopefully, in
better versions of the poem.
3 Creating strophes
Our goal is to create Basque strophes automatically. But
strophes written by combining words randomly usually
do not have any sense. For words have any meaning
when combined together, they must be organized fol-
lowing particular patterns. Towards this end we have
applied and tested different methodologies. We use a
morphological analyzer to extract POS and inflection
patterns in strophes, and to create new ones following
those schemes. The idea is to find the most commonly
used patterns so that we can use them in new strophes.
We also improve the results taking semantics into ac-
count. In the next lines we are going to describe some
resources we have used.
3.1 Corpora
For the learning process of the usual POS-tag patterns
we have employed some Basque verse corpora yielded
by theAssociation of the Friends of Bertsolaritza5 (AFB).
Those are impromptu verses sung by Basque verse-
makers and the transcriptions of this collection have
been done by members of the information center6 of the
AFB.
For this work, we are going to exploit three corpora,
5http://www.bertsozale.com/en
6http://bdb.bertsozale.com/en/orriak/get/7-xenpelar-
dokumentazio-zentroa
163
each one following a classic stanza in Basque verses: (a)
small stanza, (b) big stanza and (c) habanera.
a) Small stanza
This corpus has approximately 10.000 lines. Each
line of this corpus is composed by a strophe containing
13 syllables with a caesura between the 7th and the 8th
syllable. This stanza is used to sing sprightly verses
composed by compact ideas.
b) Big stanza
In this case, this corpus has about 8.000 lines and
each line has 18 syllables with a caesura after the 10th
syllable. Depending on the chosen melody, this stanza
can also have a complementary pause in the 5th syllable.
The topics of this type of verses tend to be more epic or
dramatic.
c) Habanera
This corpus has just about 1000 lines and they are
composed by 16-syllable lines with a caesura after the
8th syllable. It is commonly used when the verse-maker
has to compose a verse alone about a topic.
3.2 POS sequence extraction
To extract the POS-tags, we use a Basque analyzer de-
veloped by members of IXA NLP group (Aduriz et al,
2004), which involve phrasal morphologic analysis and
disambiguation, among other matters.
Once calculated the POS-tags, we estimated the most
probable POS sequences using POS-tag ngrams. We did
this in order to know which POS-tag sequence would
better fit for each stanza. For example, an acceptable
POS-tag sequence in the small stanza corpus would be
?NN-NN-JJ-VB?. This pattern could be extracted from
this strophe, which is correct.
Mirenekin+NN zakurra+NN zoriontsua+JJ da+VB.
(With Miren)+NN (the dog)+NN is+VB happy+JJ.
But to have the POS-tag pattern is not enough for a
good generation.
Special issues in the categorization of words in
Basque
The gist is that Basque is an agglutinative language,
so there is plenty information included in the suffixes
of the words. Because of that, if we don?t retain any
information about suffixes, we would lose some impor-
tant data. In Basque, we can apply declension to nouns,
pronouns, adjectives and determiners. Therefore, we
need to save the declension case information to do a
correct generation. When a set of words compound a
noun phrase, only one of the words will be inflected.
Some verbs, when they are part of a subourdinate
clause, can also be inflected. In these cases, we have to
extract the suffixes of the verb of that clause, because it
expresses the type of clause.
All this information is essential if we do not want to
lose the meaning of the clause. Below, you can see an
example of generation of strophes in Basque using only
POS-tags:
Mirenekin+NN lagunekin+NN zoriontsua+JJ da+VB.
(With Miren)+NN (with the friends)+NN is+VB happy+JJ.
As you can see, the phrase ?with Miren with the
friends is happy? is not grammatically correct. Storing
the declension information, that creation would not be
allowed and one of the clauses created by the system
could be:
Mirenekin+NN COM mahaia+NN ABS zoriontsua+JJ ABS da+VB.
(With Miren)+NN COM (the desk)+NN ABS is+VB happy+JJ ABS.
The addition of the declension information will avoid
some grammatical errors in the generation process. But
when the changed element is a verb, the system can
insert one that does not follow the same subcategoriza-
tion7, which will lead us to a grammatical error too.
So, changing the verb without more information can be
uncertain.
3.3 Semantic information
On the other hand, if we take a look at the last example,
it is not correct to say that the desk is happy. To avoid
these cases, we posed the use of the Basque WordNet
(Fellbaum, 2010) (Pociello et al, 2011). We used it to
change words with related ones.
3.4 Morphological generation
Finally, it is important the fact that Basque is an inflected
language. So, we need to have a morphological gener-
ator (Alegria et al, 2010) to create the corresponding
inflected forms of the words. This generator is based
on the Basque morphology description (Alegria et al,
1996).
4 Experiments
In this work, we have performed a set of experiments
to analyze different strategies for the generation of stro-
7The subcategorization indicates the syntactic arguments re-
quired or allowed in some lexical items (usually verbs).
164
phes in Basque. In the following lines, we explain the
ameliorations we get in each experiment.
The first experiment creates strophes by inserting
words that are consistent with each POS-tag and its
inflection information. We first get some of the most
common POS-tag sequences and for each POS-tag se-
quence the application returns two strophes. The first
strophe uses words from the same verse corpus to make
substitutions. The second one uses words from the
EPEC corpus (Aduriz et al, 2006).
The second experiment creates clauses, but chang-
ing only the nouns and adjectives from original strophes
from the corpus. We mantain the inflection information.
In this experiment we also get two strophes for each pat-
tern sequence, as in the previous attempt (verse corpus
and EPEC corpus). With this constraint we avoid the
creation of incorrect strophes because of the problem of
subcategorization (explained in section 3.2).
The third experiment makes small changes in the
original strophes (from the corpus), as it only replaces
each noun for a semantically related noun. The related
noun can be: (a) Antonym of the original word or (b)
hyponym of the hypernyms of the original word. In
order of preference, first we try to change each name
with one of its antonyms. If there is no antonym, then
we try to get the hypernyms of the word to return their
hyponims. Once the new word has been found, we
add the needed suffixes (the same ones that had the
words from the corpus) in order to fit correctly in the
strophe, using the morphological generator. The change
of words with related ones gives us the chance to express
semantically similar sentences using different words.
5 Evaluation
Once the experiments were finished, we made an evalu-
ation in order to analyze the quality of the automatically
generated strophes. The evaluation of computer gener-
ated poetry is nowadays fuzzy, so we defined a Turing
Test-like evaluation. We contacted two linguists that had
not done any work on this project, so that the evaluation
be as objective as possible. We prepared 135 strophes
interleaving some created by the machine with others
from the corpus. We asked the evaluators to guess if the
strophe was done by the machine or by a human. We
only draw conclusions using machine-generated stro-
phes, as we want to know how many of them percolate
as human-generated ones. In the next table you can
see the rate of sentences created by the machine and
suposed to be done by humans:
EXPERIMENT
Evaluator 1 1 2 3
Percolated as human 0.033 0.259 0.75
Evaluator 2
Percolated as human 0.333 0.481 0.75
As you can see, according to Evaluator 1, the first
experiment was not very worthy, as the only 3.3% of
the machine generated strophes percolated as human
generated ones. The second experiment got better re-
sults, and the 26% of the strophes were thought to be
human generated ones. As expected, the strophes of
the third experiment are the most trustworthy ones. The
results given by the second evaluator are higher, but the
important fact is the increase of the progression over the
experiments.
6 Discussion & Future Work
In this paper we have presented a set of experiments
for the automatic generation of poetry using POS and
inflectional tag patterns and some semantics. In the
last section we show the Turing Test-like evaluation to
measure the reliability of each experiment. This will be
part of a whole poetry analysis and generation system.
In the future, we intend to change verbs from stro-
phes controlling the subcategorization of them in order
to enable the creation of well-formed strophes about a
constrained topic. Also, we plan to use a frame seman-
tics resource, such as FrameNet, and after creating a
strophe, make some modifications to get an acceptable
semantic meaning.
165
References
Aduriz, I., Aranzabe, M., Arriola, J., de Ilarraza, A.,
Gojenola, K., Oronoz, M., and Uria, L. (2004). A cas-
caded syntactic analyser for Basque. Computational
Linguistics and Intelligent Text Processing, pages 124?
134.
Aduriz, I., Aranzabe, M. J., Arriola, J. M., Atutxa, A.,
de Ilarraza, D. A., Ezeiza, N., Gojenola, K., Oronoz,
M., Soroa, A., and Urizar, R. (2006). Methodology
and steps towards the construction of EPEC, a corpus
of written Basque tagged at morphological and syn-
tactic levels for automatic processing. Language and
Computers, 56(1):1?15.
Alegria, I., Artola, X., Sarasola, K., and Urkia, M.
(1996). Automatic morphological analysis of Basque.
Literary and Linguistic Computing, 11(4):193?203.
Alegria, I., Etxeberria, I., Hulden, M., and Maritxalar,
M. (2010). Porting Basque morphological grammars
to foma, an open-source tool. Finite-State Methods
and Natural Language Processing, pages 105?113.
Astigarraga, A., Agirrezabal, M., Lazkano, E., Jauregi,
E., and Sierra, B. (2013). Bertsobot: the first min-
strel robot. 6th International Conference on Human
System Interaction, Gdansk.
Fellbaum, C. (2010). WordNet. Springer.
Gerva?s, P. (2000). Wasp: Evaluation of different strate-
gies for the automatic generation of Spanish verse. In
Proceedings of the AISB-00 Symposium on Creative
& Cultural Aspects of AI, pages 93?100.
Gerva?s, P. (2001). An expert system for the composition
of formal spanish poetry. Knowledge-Based Systems,
14(3):181?188.
Gerva?s, P. (2010). Engineering linguistic creativity: Bird
flight and jet planes. In Proceedings of the NAACL
HLT 2010 Second Workshop on Computational Ap-
proaches to Linguistic Creativity, pages 23?30. Asso-
ciation for Computational Linguistics.
Levy, R. P. (2001). A computational model of poetic
creativity with neural network as measure of adaptive
fitness. In Proccedings of the ICCBR-01 Workshop
on Creative Systems. Citeseer.
Manurung, R. (2003). An evolutionary algorithm ap-
proach to poetry generation. PhD thesis, School of
informatics, University of Edinburgh.
Pociello, E., Agirre, E., and Aldezabal, I. (2011).
Methodology and construction of the Basque Word-
net. Language resources and evaluation, 45(2):121?
142.
166
