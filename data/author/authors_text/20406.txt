Proceedings of the 14th Conference of the European Chapter of the Association for Computational Linguistics, pages 39?48,
Gothenburg, Sweden, April 26-30 2014.
c
?2014 Association for Computational Linguistics
A Joint Model for Quotation Attribution and Coreference Resolution
Mariana S. C. Almeida
??
Miguel B. Almeida
??
Andr
?
e F. T. Martins
??
?
Priberam Labs, Alameda D. Afonso Henriques, 41, 2
o
, 1000-123 Lisboa, Portugal
?
Instituto de Telecomunicac??oes, Instituto Superior T?ecnico, 1049-001 Lisboa, Portugal
{mla,mba,atm}@priberam.pt
Abstract
We address the problem of automatically
attributing quotations to speakers, which
has great relevance in text mining and me-
dia monitoring applications. While cur-
rent systems report high accuracies for
this task, they either work at mention-
level (getting credit for detecting uninfor-
mative mentions such as pronouns), or as-
sume the coreferent mentions have been
detected beforehand; the inaccuracies in
this preprocessing step may lead to error
propagation. In this paper, we introduce a
joint model for entity-level quotation attri-
bution and coreference resolution, exploit-
ing correlations between the two tasks. We
design an evaluation metric for attribu-
tion that captures all speakers? mentions.
We present results showing that both tasks
benefit from being treated jointly.
1 Introduction
Quotations are a crucial part of news stories, giv-
ing the perspectives of the participants in the nar-
rated event, and making the news sound objective.
The ability of extracting and organizing these quo-
tations is highly relevant for text mining applica-
tions, as it may aid journalists in fact-checking,
help users browse news threads, and reduce human
intervention in media monitoring. This involves
assigning the correct speaker to each quote?a
problem called quotation attribution (?2).
There is significant literature devoted to this
task, both for narrative genres (Mamede and
Chaleira, 2004; Elson and McKeown, 2010) and
newswire domains (Pouliquen et al., 2007; Sar-
mento et al., 2009; Schneider et al., 2010). While
the earliest works focused on devising lexical and
syntactic rules and hand-crafting grammars, there
has been a recent shift toward machine learning
approaches (Fernandes et al., 2011; O?Keefe et al.,
2012; Pareti et al., 2013), with latest works re-
porting high accuracies for speaker identification
in newswire (in the range 80?95% for direct and
mixed quotes, according to O?Keefe et al. (2012)).
Despite these encouraging results, quotation min-
ing systems are not yet fully satisfactory, even
when only direct quotes are considered. Part of
the problem, as we next describe, has to do with
inaccuracies in coreference resolution (?3).
The ?easiest? instances of quotation attribution
problems arise when the speaker and the quote are
semantically connected, e.g., through a reported
speech verb like said. However, in newswire text,
the subject of this verb is commonly a pronoun or
another uninformative anaphoric mention. While
the speaker thus determined may well be correct?
being in most cases consistent with human annota-
tion choices (Pareti, 2012)?from a practical per-
spective, it will be of little use without a corefer-
ence system that correctly resolves the anaphora.
Since the current state of the art in coreference res-
olution is far from perfect, errors at this stage tend
to propagate to the quote attribution system.
Consider the following examples for illustration
(taken from the WSJ-1057 and WSJ-0089 docu-
ments in the Penn Treebank), where we have an-
notated with subscripts some of the mentions:
(a) Rivals carp at ?the principle of [Pilson]
M
1
,?
as [NBC?s Arthur Watson]
M
2
once put it ?
?[he]
M
3
?s always expounding that rights are
too high, then [he]
M
4
?s going crazy.? But [the
49-year-old Mr. Pilson]
M
5
is hardly a man to
ignore the numbers.
(b) [English novelist Dorothy L. Sayers]
M
1
de-
scribed [ringing]
M
2
as a ?passion that finds its
satisfaction in [mathematical completeness]
M
3
and [mechanical perfection]
M
4
.? [Ringers]
M
5
,
[she]
M
6
added, are ?filled with the solemn intox-
ication that comes of intricate ritual faultlessly
performed.?
In example (a), the pronoun coreference system
used by O?Keefe et al. (2012) erroneously clus-
ters together mentions M
2
, M
3
and M
4
(instead
of the correct clustering {M
1
,M
3
,M
4
}). Since it
is unlikely that the speaker is co-referent to a third-
39
person pronoun he inside the quote, a pipeline sys-
tem would likely attribute (incorrectly) this quote
to Pilson. In example (b), there are two quotes
with the same speaker entity (as indicated by the
cue she added). This gives evidence that M
1
and
M
6
should be coreferent. A pipeline approach
would not be able to exploit these correlations.
We argue that this type of mistakes, among
others, can be prevented by a system that per-
forms quote attribution and coreference resolution
jointly (?4). Our joint model is inspired by re-
cent work in coreference resolution that indepen-
dently ranks the possible mention?s antecedents,
forming a latent coreference tree structure (Denis
and Baldridge, 2008; Fernandes et al., 2012; Dur-
rett et al., 2013; Durrett and Klein, 2013). We con-
sider a generalization of these structures which we
call a quotation-coreference tree. To effectively
couple the two tasks, we need to go beyond simple
arc-factored models and consider paths in the tree.
We formulate the resulting problem as a logic pro-
gram, which we tackle using a dual decomposition
strategy (?5). We provide an empirical compari-
son between our method and baselines for each of
the tasks and a pipeline system, defining suitable
metrics for entity-level quotation attribution (?6).
2 Quotation Attribution
The task of quotation attribution can be formally
defined as follows. Given a document containing
a sequence of quotations, ?q
1
, . . . , q
L
?, and a set
of candidate speakers, {s
1
, . . . , s
M
}, the goal is to
a assign a speaker to every quote.
Previous work has handled direct and mixed
quotations (Sarmento et al., 2009; O?Keefe et al.,
2012), easily extractable with regular expressions
for detecting quotation marks, as well as indirect
quotations (Pareti et al., 2013), which are more in-
volved and require syntactic or semantic patterns.
In this work, we resort to direct and mixed quo-
tations. Pareti (2012) defines quotation attribu-
tions in terms of their content span (the quotation
text itself), their cue (a lexical anchor of the attri-
bution relation, such as a reported speech verb),
and the source span (the author of the quote).
The same reference introduced the PARC dataset,
which we use in our experiments (?6) and which
is based on the annotation of a database of attribu-
tion relations from the Penn Discourse Treebank
(Prasad et al., 2008). Several machine learning
algorithms have been applied to this task, either
framing the problem as classification (an indepen-
dent decision for each quote), or sequence label-
ing (using greedy methods or linear-chain condi-
tional random fields); see O?Keefe et al. (2012)
for a comparison among these different methods.
In this paper, we distinguish between mention-
level quotation attribution, in which the candi-
date speakers are individual mentions, and entity-
level quotation attribution, in which they are en-
tity clusters comprised of one or more mentions.
With this distinction, we attempt to clarify how
prior work has addressed this task, and design suit-
able baselines and evaluation metrics. For exam-
ple, O?Keefe et al. (2012) applies a coreference
resolver before quotation attribution, whereas de
La Clergerie et al. (2011) does it afterwards, as a
post-processing stage. An important issue when
evaluating quotation attribution systems is to pre-
vent them from getting credit for detecting unin-
formative speakers such as pronouns; we will get
back to this topic in ?6.2.
3 Coreference Resolution
In coreference resolution, we are given a set of
mentions M := {m
1
, . . . ,m
K
}, and the goal
is to cluster them into discourse entities, E :=
{e
1
, . . . , e
J
}, where each e
j
? M and e
j
6= ?.
We follow Haghighi and Klein (2007) and distin-
guish between proper, nominal, and pronominal
mentions. Each requires different types of infor-
mation to be resolved. Thus, the task involves de-
termining anaphoricity, resolving pronouns, and
identifying semantic compatibility among men-
tions. To resolve these references, one typically
exploits contextual and grammatical clues, as well
as semantic information and world knowledge,
to understand whether mentions refer to people,
places, organizations, and so on. The importance
of coreference resolution has led to it being the
subject of recent CoNLL shared tasks (Pradhan et
al., 2011; Pradhan et al., 2012).
There has been a variety of approaches for
this problem. Early work used local discrimina-
tive classifiers, making independent decisions for
each mention or pair of mentions (Soon et al.,
2001; Ng and Cardie, 2002). Lee et al. (2011)
proposed a competitive non-learned sieve-based
method, which constructs clusters by aglomerat-
ing mentions in a greedy manner. Entity-centric
models define scores for the entire entity clusters
(Culotta et al., 2007; Haghighi and Klein, 2010;
40
Rahman and Ng, 2011) and seek the set of enti-
ties that optimize the sum of scores; this can also
be promoted in a decentralized manner (Durrett et
al., 2013). Pairwise models (Bengtson and Roth,
2008; Finkel et al., 2008; Versley et al., 2008), on
the other hand, define scores for each pair of men-
tions to be coreferent, and define the clusters as
the transitive closure of these pairwise relations.
A disadvantage of these two methods is that they
lead to intractable decoding problems, so approx-
imate methods must be used. For comprehensive
overviews, see Stoyanov et al. (2009), Ng (2010),
Pradhan et al. (2011) and Pradhan et al. (2012).
Our joint approach (to be fully described in
?4) draws inspiration from recent work that shifts
from entity clusters to coreference trees (Fernan-
des et al., 2012; Durrett and Klein, 2013). These
models define scores for each mention to link to
its antecedent or to an artifical root symbol $ (in
which case it is not anaphoric). The computation
of the best tree can be done exactly with spanning
tree algorithms, or by independently choosing the
best antecedent (or the root) for each mention, if
only left-to-right arcs are allowed. The same idea
underlies the antecedent ranking approach of De-
nis and Baldridge (2008). Once the coreference
tree is computed, the set of entity clusters E is ob-
tained by associating each entity set to a branch of
the tree coming out from the root. This is illus-
trated in Figure 1 (left).
4 Joint Quotations and Coreferences
In this work, we propose that quotation attribu-
tion and coreference resolution are solved jointly
by treating both mentions and quotations as nodes
in a generalized structure called a quotation-
coreference tree (Figure 1, right). The joint sys-
tem?s decoding process consists in creating such
a tree, from which a clustering of the nodes can
be immediatelly obtained. The clustering is inter-
preted as follows:
? All mention nodes in the cluster are coreferent,
thus they describe one single entity (just like in
a standard coreference tree).
? Quotation nodes that appear together with those
mentions in a cluster will be assigned that entity
as the speaker.
For example, in Figure 1 (right), the en-
tity Dorothy L. Sayers (formed by mentions
{M
1
,M
6
}) is assigned as the speaker of quota-
tions Q
1
and Q
2
. We forbid arcs between quotes
and from a quote to a mention, effectively con-
straining the quotes to be leaves in the tree, with
mentions as parents.
1
We force a tree with only
left-to-right arcs, by choosing a total ordering of
the nodes that places all the quotations in the right-
most positions (which implies that any arc con-
necting a mention to a quotation will point to the
right). The quotation-coreference tree is obtained
as the best spanning tree that maximizes a score
function, to be described next.
4.1 Basic Model
Our basic model is a feature-based linear model
which assigns a score to each candidate arc linking
two mentions (mention-mention arcs), or linking a
mention to a quote (mention-quotation arcs). Our
basic system is called QUOTEBEFORECOREF for
reasons we will detail in section 4.2.
4.1.1 Coreference features
For the mention-mention arcs, we use the same
coreference features as the SURFACE model of the
Berkeley Coreference Resolution System (Durrett
and Klein, 2013), plus features for gender and
number obtained through the dataset of Bergsma
and Lin (2006). This is a very simple lexical-
driven model which achieves state-of-the-art re-
sults. The features are shown in Table 1.
4.1.2 Quotation features
For the quote attribution features, we use features
inspired by O?Keefe et al. (2012), shown in Ta-
ble 2. The same set of features works for speakers
that are individual mentions (in the model just de-
scribed), and for speakers that are clusters of men-
tions (used in ?6 for the baseline QUOTEAFTER-
COREF). These features include various distances
between the mention and the quote, the indication
of the speaker being inside the quote span, and var-
ious contextual features.
4.2 Final Model
While the basic model just described puts quo-
tations and mentions together, it is not more ex-
pressive than having separate models for the two
tasks. In fact, if we just have scores for individual
arcs, the two problems are decoupled: the optimal
1
This is implemented by defining ?? scores for all the
outgoing arcs in a quotation node, as well as incoming arcs
originating from the root.
41
Figure 1: Left: A typical coreference tree for the text snippet in ?1, example (b), with mentions M
1
and
M
6
clustered together and M
2
and M
3
left as singletons. Right: A quotation-coreference tree for the
same example. Mention nodes are depicted as green circles, and quotation nodes in shaded blue. The
dashed rectangle represents a branch of the tree, containing the entity cluster associated with the speaker
Dorothy L. Sayers, as well as the quotes she authored.
Features on the child mention
[ANAPHORIC (T/F)] + [CHILD HEAD WORD]
[ANAPHORIC (T/F)] + [CHILD FIRST WORD]
[ANAPHORIC (T/F)] + [CHILD LAST WORD]
[ANAPHORIC (T/F)] + [CHILD PRECEDING WORD]
[ANAPHORIC (T/F)] + [CHILD FOLLOWING WORD]
[ANAPHORIC (T/F)] + [CHILD LENGTH]
Features on the parent mention
[PARENT HEAD WORD]
[PARENT FIRST WORD]
[PARENT LAST WORD]
[PARENT PRECEDING WORD]
[PARENT FOLLOWING WORD]
[PARENT LENGTH]
[PARENT GENDER]
[PARENT NUMBER]
Features on the pair
[EXACT STRING MATCH (T/F)]
[HEAD MATCH (T/F)]
[SENTENCE DISTANCE, CAPPED AT 10]
[MENTION DISTANCE, CAPPED AT 10]
Table 1: Coreference features, associated to each
candidate mention-mention arc in the tree. As in
Durrett and Klein (2013), we also include con-
junctions of each feature with the child and parent
mention types (proper, nominal, or, if pronominal,
the pronoun word).
quotation-coreference tree can be obtained by first
assigning the highest scored mention to each quo-
tation, and then building a standard coreference
tree involving only the mention nodes. This cor-
responds to the QUOTEBEFORECOREF baseline,
to be used in ?6.
To go beyond separate models, we introduce
a final JOINT model, which includes additional
scores that depend not just on arcs, but also on
paths in the tree. Concretely, we select certain
Features on the quote-speaker pair
[WORD DISTANCE]
[SENTENCE DISTANCE]
[# IN-BETWEEN QUOTES]
[# IN-BETWEEN SPEAKERS]
[SPEAKER IN QUOTE, 1ST PERS. SG. PRONOUN (T/F)]
[SPEAKER IN QUOTE, 1ST PERS. PL. PRONOUN (T/F)]
[SPEAKER IN QUOTE, OTHER (T/F)]
Features on the speaker
[PREVIOUS WORD IS QUOTE (T/F)]
[PREVIOUS WORD IS SAME QUOTE (T/F)]
[PREVIOUS WORD IS ANOTHER QUOTE (T/F)]
[PREVIOUS WORD IS SPEAKER (T/F)]
[PREVIOUS WORD IS PUNCTUATION (T/F)]
[PREVIOUS WORD IS REPORTED SPEECH VERB (T/F)]
[PREVIOUS WORD IS VERB (T/F)]
[NEXT WORD IS QUOTE (T/F)]
[NEXT WORD IS SAME QUOTE (T/F)]
[NEXT WORD IS ANOTHER QUOTE (T/F)]
[NEXT WORD IS SPEAKER (T/F)]
[NEXT WORD IS PUNCTUATION (T/F)]
[NEXT WORD IS REPORTED SPEACH VERB (T/F)]
[NEXT WORD IS VERB (T/F)]
Table 2: Quotation attribution features, associ-
ated to each quote-speaker candidate. These
features are used in the QUOTEONLY, QUOTE-
BEFORECOREF, and JOINT systems (where the
speaker is a mention) and in the QUOTEAFTER-
COREF system (where the speaker is an entity).
pairs of nodes and introduce scores for the event
that both nodes are in the same branch of the tree.
Rather than doing this for all pairs?which es-
sentially would revert to the computationally de-
manding pairwise coreference models discussed
in ?3?we focus on a small set of pairs that are
mostly related with the interaction between the
two tasks we address jointly. Namely, we consider
the mention-quotation pairs such that the mention
42
Mention-inside-quote features
[MENTION IS 1ST PERSON, SING. PRONOUN (T/F)]
[MENTION IS 1ST PERSON, PLUR. PRONOUN (T/F)]
[OTHER MENTION (T/F)]
Consecutive quote features
[DISTANCE IN NUMBER OF WORDS]
[DISTANCE IN NUMBER OF SENTENCES]
Table 3: Features used in the JOINT system for
mention-quote pairs (only for mentions inside
quotes) and for quote pairs (only for consecutive
quotes). These features are associated to pairs in
the same branch of the quotation-coreference tree.
span is within the quotation span (mention-inside-
quotation pairs), and pairs of quotations that ap-
pear consecutively in the document (consecutive-
quotation pairs). The idea is that, if consecutive
quotations appear on the same branch of the tree,
they will have the same speaker (the entity class
associated with that branch), even though they
are not necessarily siblings. These two pairs are
aligned with the motivating examples (a) and (b)
shown in ?1.
4.2.1 Mention-inside-quotation features
The top rows of Table 3 show the features we de-
fined for mentions inside quotes. The features in-
dicate whether the mention is first-person singular
pronominal (I, me, my, myself ), which provides
strong evidence that it co-refers with the quotation
author, whether it is first-person plural pronominal
(we, us, our, ourselves), which provides a weaker
evidence (but sometimes works for colective enti-
ties that are organizations), and whether none of
the above happens?in which case, the speaker is
unlikely to be co-referent with the mention.
4.2.2 Consecutive quotation features
We show our consecutive quote features in the bot-
tom rows of Table 3. We use only distance fea-
tures, measuring both distance in sentences and
in words, with binning. These simple features are
enough to capture the trend of consecutive quotes
that are close apart to have the same speaker.
5 Joint Decoding and Training
While decoding in the basic model is easy?
as pointed out above, it can even be done
by running a mention-level quotation attribu-
tor and the coreference resolver independently
(QUOTEBEFORECOREF)?exact decoding with
the JOINT model is in general intractable, since
this model breaks the independence assumption
between the arcs. However, given the relatively
small amount of node pairs that have scores (only
mentions inside quotations and consecutive quota-
tions), we expect this ?perturbation? to be small
enough not to affect the quality of an approxi-
mate decoder. The situation resembles other prob-
lems in NLP, such as non-projective dependency
parsing, which becomes intractable if higher order
interactions between the arcs are considered, but
can still be well approximated. Inspired by work
in parsing (Martins et al., 2009) using linear re-
laxations with multi-commodity flow models, we
propose a similar strategy by defining auxiliary
variables and coupling them in a logic program.
5.1 Logic Formulation
We next derive the logic program for joint decod-
ing of coreferences and quotations. The input is a
set of nodes (including an artificial node), a set of
candidate arcs with scores, and a set of node pairs
with scores. To make the exposition lighter, we
index nodes by integers (starting by the root node
0) and we do not distinguish between mention and
quotation nodes. Only arcs from left to right are
allowed. The variables in our logic program are:
? Arc variables a
i?j
, which take the value 1 if
there is an arc from i to j, and 0 otherwise.
? Pair variables p
i,j
, which indicate that nodes i
and j are in the same branch of the tree.
? Path variables pi
j?
?
k
, indicating if there is a
path from j to k.
? Common ancestor variables ?
i?
?
j,k
, indicating
that node i is a common ancestor of nodes j and
k in the tree.
Consistency among these variables is ensured by
the following set of constraints:
? Each node except the root has exactly one par-
ent:
j?1
?
i=0
a
i?j
= 1, ?j 6= 0 (1)
? There is a path from each node to itself:
pi
i?
?
i
= 1, ?i (2)
? There is a path from i to k iff there is some j
such that i is connected to j and there is path
43
from j to k:
pi
i?
?
k
=
?
i<j?k
(a
i?j
? pi
j?
?
k
), ?i, k (3)
? Node i is a common ancestor of k and ` iff there
is a path from i to k and from i to `:
?
i?
?
k,`
= pi
i?
?
k
? pi
i?
?
`
, ?i, k, ` (4)
? Nodes k and ` are in the same branch if they
have a common ancestor which is not the root:
p
k,`
=
?
i 6=0
?
i?
?
k,`
, ?k, l. (5)
The objective to optimize is linear in the arc and
pair variables (hence the problem can be repre-
sented as an integer linear program by turning the
logical constraints into linear inequalities).
5.2 Dual Decomposition
To decode, we employ the alternating direc-
tions dual decomposition algorithm (AD
3
), which
solves a relaxation of the ILP above. AD
3
has
been used successfully in various NLP tasks, such
as dependency parsing (Martins et al., 2011; Mar-
tins et al., 2013), semantic role labeling (Das et al.,
2012), and compressive summarization (Almeida
and Martins, 2013). At test time, if the solution is
not integer, we apply a simple rounding procedure
to obtain an actual tree: for each node j, obtain
the antecedent (or root) i with the highest a
i?j
,
solving ties arbitrarily.
5.3 Learning the Model
We train the joint model with the max-loss variant
of the MIRA algorithm (Crammer et al., 2006),
adapted to latent variables (we simply obtain the
best tree consistent with the gold clustering at each
step of MIRA, before doing cost-augmented de-
coding). The resulting algorithm is very similar
to the latent perceptron algorithm in Fernandes
et al. (2011), but it uses the aggressive stepsize
of MIRA. We set the same costs for coreference
mistakes as Durrett and Klein (2013), and a unit
cost for missing the correct speaker of a quota-
tion. For speeding up decoding, we first train a ba-
sic pruner for the coreference system (using only
the features described in ?4.1.1), limiting the num-
ber of candidate antecedents to 10, and discarding
scores whose difference with respect to the best
antecedent is below a threshold. We also freeze
the best coreference trees consistent with the gold
clustering using the pruner model, to eliminate the
need of latent variables in the second stage.
6 Experiments
6.1 Dataset
We used the 597 documents of the Wall Street
Journal (WSJ) corpus that were disclosed for the
CoNLL-2011 coreference shared task (Pradhan
et al., 2011) as a dataset for coreference resolu-
tion. This dataset includes train, development and
test partitions, annotated with coreference infor-
mation, as well as gold and automatically gener-
ated syntactic and semantic information.
The CoNLL-2011 corpus does not contain an-
notations of quotation attribution. For that rea-
son, we used the WSJ quotation annotations in the
PARC dataset (Pareti, 2012). We used the same
version of the corpus as O?Keefe et al. (2012),
but with different splits, to match the dataset parti-
tions in the coreference resolution data. This attri-
bution corpus contains 279 documents of the 597
CoNLL-2011 files, having a total of 1199 anno-
tated quotes. As in that work, we only consid-
ered directed speech quotes and the direct part of
mixed quotes (quotes with both direct and undi-
rected speech).
6.2 Metrics for quotation attribution
Previous evaluations of quotation attribution sys-
tems were designed at mention level, and are thus
assessed by comparing the predicted speaker men-
tion span with the gold one. This metric assesses
the amount of speaker mentions that were cor-
rectly identified. For compatibility with previous
assessments, we report this score, which we call
Exact Match (EM): this is the percentage of pre-
dicted speakers with the same span as the gold one.
However, for several quotations (about 30% in
the PARC corpus) this information is of little
value, since the gold mention is a pronoun, which
per se does not give any useful information about
the actual speaker entity. Considering this fact,
we propose two other metrics that capture infor-
mation at the entity level, reflecting the amount of
information a system is able to extract about the
speakers:
? Representative Speaker Match (RSM): for each
annotated quote, we obtain the full gold coref-
erence set of the gold annotated speaker, and
44
choose a representative speaker from that clus-
ter. We define this representative speaker as
the proper mention which is the closest to the
quote (if available); if the cluster does not con-
tain proper mentions, we use the closest nom-
inal mention; if only pronominal mentions are
available, we use the original annotated speaker.
The final measure is the percentage of predicted
speakers that match the string of the correspond-
ing representative speakers.
? Entity Cluster F
1
(ECF
1
). Considering that a
system outputs a set of mentions coreferent to
the predicted speakers, we compute the F
1
score
between the predicted set and the gold corefer-
ence cluster of the correct speaker.
The entity level metrics are not only useful for
assessing the quality of an quotation attribution
system?they also reflect the quality of the un-
derlying coreference system used to cluster the re-
lated mentions.
6.3 Attribution baselines
To analyze the task of entity-level quotation attri-
bution, we implemented three baseline systems.
? QUOTEONLY: A quotation attribution system
trained on the representative speaker, instead of
the gold speaker. For fairness, this baseline was
trained with an extra feature indicating the type
of the mention (nominal, pronominal or proper).
? QUOTEAFTERCOREF: An attribution system
directly applied to the output of a predicted
coreference chain. This baseline uses a coref-
erence pre-processing, as applied in O?Keefe et
al. (2012).
? QUOTEBEFORECOREF: An attribution system
trained on the gold speaker, and post-combined
with the output of a coreference system. This
system should be able to provide a set of infor-
mative mentions about a quote, post-resolving
the problem of the pronominal speakers. This
kind of post-coreference approach was used by
de La Clergerie et al. (2011).
6.4 Coreference Resolution
We use the coreference results of our basic
QUOTEBEFORECOREF system as a baseline for
coreference resolution. Since this system effec-
tively solves the two problems separately, this can
be considered our implementation of the SURFACE
system of Durrett and Klein (2013) . As reported
in Table 4, the perfromance of our baseline is
comparable with the one of the SURFACE system
of Durrett and Klein (2013), which is denoted as
SURFACE-DK-2013.
2
Table 4 also show the CoNLL metrics obtained
for the proposed system of joint coreference reso-
lution and quotation attribution. Our joint system
outperformed the baseline with statistical signifi-
cance (with p < 0.05 and according to a bootstrap
resampling test (Koehn, 2004)) for all metrics ex-
pect for the CEAFE F
1
measure, whose value was
only slighty improved. These results confirm that
the coreference resolution task benefits for being
tackled jointly with quotation attribution.
6.5 Quotation attribution
We implemented and trained the three attribution
systems that were described in ?6.3 and the system
for joint coreference and author attribution that is
detailed in ?4. For each system, Table 5 shows the
mention-based and entity-based metrics that were
described in ?6.2.
Training a quotation attribution system using
representative speakers instead of the gold speak-
ers (QUOTEONLY) leads to rather disappointing
results. As expected, we conclude that assigning
the semantically related speaker is considerably
easier than selecting another mention that is coref-
erent with the correct speaker.
Using (predicted) coreference information,
both QUOTEAFTERCOREF and QUOTEBE-
FORECOREF systems considerably increase our
entity-based metrics. This was also expected,
since the coreference chain allows these baselines
to output a set of related mentions. We observed
that, using the coreference resolution clusters as
the attribution entity (QUOTEAFTERCOREF) in-
fluences the results negatively when compared to
a more basic system that runs coreference on top
of attribution result of the QUOTEONLY system
(QUOTEBEFORECOREF). These results indicate
that the quotation attribution task performs better
by looking at the speaker mention that connects
more strongly with the quotation, instead of trying
to match the whole cluster.
Finally, the scores achieved by our JOINT
2
To make the systems comparable, we re-trained Durrett
et al.?s coreference system (version 0.9) on the WSJ portion
of the Ontonotes datasets (the portion which has quote anno-
tations from Pareti et al.?s PARC dataset). For this reason, the
values in Table 4 differ from those reported in Durrett and
Klein (2013), which where trained and tested in the entire
Ontonotes.
45
MUC F
1
BCUB F
1
CEAFE F
1
Avg.
SURFACE-DK-2013 58.87 62.74 45.46 55.7
SURFACE-OURS [QUOTEBEFORECOREF] 57.89 62.50 45.48 55.3
JOINT 58.78 63.79 45.50 56.0
Table 4: Coreference obtained with the CoNLL scorer (version 5) in the test partition of the WJS cor-
pus, for the SURFACE system of Durrett and Klein (2013), our baseline implementation of the that sys-
tem (SURFACE-OURS), and our JOINT approach. All systems were trained in the WSJ portion of the
Ontonotes.
EM RSM ECF
1
QUOTEONLY 49.1% 49.4% 41.2%
QUOTEAFTERCOREF 76.7% 64.6% 70.0%
QUOTEBEFORECOREF 88.7% 74.7% 73.7%
JOINT 88.1% 76.6% 74.1%
Table 5: Attribution results obtained, in the test
set, for the three baseline systems and our joint
system.
model are slightly above the best baseline sys-
tem QUOTEBEFORECOREF, yielding the best per-
formance on the entity-level quotation attribution
task. The differences, however, were not found
statistically significant, probably due to the small
number of quotes (159) in the test set.
The average decoding runtime of the JOINT
model is 1.6 sec. per document, against 0.2 sec.
for the pipeline system. This slowdown is ex-
pectable given the fact that the pipeline system
only needs to make independent decisions, while
the joint version needs to solve a harder combina-
torial problem. Yet, this runtime is within the or-
der of magnitude of the time necessary to prepro-
cess the documents (which includes tagging and
parsing the sentences).
6.6 Error Analysis
To understand the type of errors that are prevented
with the JOINT system, consider the following ex-
ample (from document WSJ-2428):
? [Robert Dow, a partner and portfolio manager
at Lord, Abbett & Co.]
M
1
, which manages $4
billion of high-yield bonds, says [he]
M
2
doesn?t
?think there is any fundamental economic ra-
tionale (for the junk bond rout). It was [herd
instinct]
M
3
.? [He]
M
4
adds: ?The junk market
has witnessed some trouble and now some peo-
ple think that if the equity market gets creamed
that means the economy will be terrible and
that?s bad for junk.?
The basic QUOTEBEFORECOREF system
wrongly clusters together M
3
and M
4
as corefer-
ent, and wrongly assigns M
3
as the representative
speaker. On the other hand, the JOINT system
correctly clusters M
1
, M
2
and M
4
as coreferent.
This is due to the presence of the consecutive
quote features which aid in understanding that
both quotes have the same speaker, and the
mention-inside-quote features which prevent herd
instinct, which is inside a quote, from being
coreferent with He, which is very likely the author
of the quotes due to the verb adds.
7 Conclusions
We presented a framework for joint coreference
resolution and quotation attribution. We repre-
sented the problem as finding an optimal spanning
tree in a graph including both quotation nodes and
mention nodes. To couple the two tasks, we intro-
duce variables that look at paths in the tree, indi-
cating if pairs of nodes are in the same branch, and
we formulate decoding as a logic program. Each
branch from the root can then be interpreted as a
cluster containing all coreferent mentions of an en-
tity and all quotes from that entity.
In addition, we designed an evaluation metric
suitable for entity-level quotation attribution that
takes into account informative speakers. Experi-
mental results show mutual improvements in the
coreference resolution and quotation attribution
tasks.
Future work will include extensions to tackle in-
direct quotations, possibly exploring connections
to semantic role labeling.
Acknowledgements
We thank all reviewers for their valuable com-
ments, and Silvia Pareti and Tim O?Keefe for pro-
viding us the PARC dataset and answering sev-
eral questions. This work was partially supported
by the EU/FEDER programme, QREN/POR Lis-
boa (Portugal), under the Intelligo project (con-
tract 2012/24803) and by a FCT grant PTDC/EEI-
SII/2312/2012.
46
References
M. B. Almeida and A. F. T. Martins. 2013. Fast and ro-
bust compressive summarization with dual decom-
position and multi-task learning. In Proc. of the An-
nual Meeting of the Association for Computational
Linguistics.
Eric Bengtson and Dan Roth. 2008. Understanding the
value of features for coreference resolution. In Pro-
ceedings of the Conference on Empirical Methods in
Natural Language Processing, pages 294?303. As-
sociation for Computational Linguistics.
Shane Bergsma and Dekang Lin. 2006. Bootstrapping
path-based pronoun resolution. In Proceedings of
the 21st International Conference on Computational
Linguistics and the 44th annual meeting of the Asso-
ciation for Computational Linguistics, pages 33?40.
Association for Computational Linguistics.
K. Crammer, O. Dekel, J. Keshet, S. Shalev-Shwartz,
and Y. Singer. 2006. Online Passive-Aggressive Al-
gorithms. Journal of Machine Learning Research,
7:551?585.
Aron Culotta, Michael Wick, Robert Hall, and An-
drew McCallum. 2007. First-order probabilistic
models for coreference resolution. In Human Lan-
guage Technology Conference of the North Ameri-
can Chapter of the Association for Computational
Linguistics (HLT/NAACL), pages 81?88.
D. Das, A. F. T. Martins, and N. A. Smith. 2012. An
Exact Dual Decomposition Algorithm for Shallow
Semantic Parsing with Constraints. In Proc. of First
Joint Conference on Lexical and Computational Se-
mantics (*SEM).
?
Eric de La Clergerie, Beno??t Sagot, Rosa Stern, Pas-
cal Denis, Ga?elle Recourc?e, and Victor Mignot.
2011. Extracting and visualizing quotations from
news wires. In Human Language Technology. Chal-
lenges for Computer Science and Linguistics, pages
522?532. Springer.
Pascal Denis and Jason Baldridge. 2008. Specialized
models and ranking for coreference resolution. In
Proceedings of the Conference on Empirical Meth-
ods in Natural Language Processing, pages 660?
669. Association for Computational Linguistics.
Greg Durrett and Dan Klein. 2013. Easy victories and
uphill battles in coreference resolution. In Proceed-
ings of the 2013 Conference on Empirical Methods
in Natural Language Processing.
Greg Durrett, David Hall, and Dan Klein. 2013.
Decentralized entity-level modeling for coreference
resolution. In Proc. of Annual Meeting of the Asso-
ciation for Computational Linguistics.
David K Elson and Kathleen McKeown. 2010. Auto-
matic attribution of quoted speech in literary narra-
tive. In AAAI.
William Paulo Ducca Fernandes, Eduardo Motta, and
Ruy Luiz Milidi?u. 2011. Quotation extraction for
portuguese. In Proceedings of the 8th Brazilian
Symposium in Information and Human Language
Technology (STIL 2011), Cuiab?a, pages 204?208.
Eraldo Rezende Fernandes, C??cero Nogueira dos San-
tos, and Ruy Luiz Milidi?u. 2012. Latent structure
perceptron with feature induction for unrestricted
coreference resolution. In Joint Conference on
EMNLP and CoNLL-Shared Task, pages 41?48. As-
sociation for Computational Linguistics.
J.R. Finkel, A. Kleeman, and C.D. Manning. 2008. Ef-
ficient, feature-based, conditional random field pars-
ing. Proc. of Annual Meeting on Association for
Computational Linguistics, pages 959?967.
Aria Haghighi and Dan Klein. 2007. Unsupervised
coreference resolution in a nonparametric bayesian
model. In Annual meeting-Association for Compu-
tational Linguistics, volume 45, page 848.
Aria Haghighi and Dan Klein. 2010. Coreference
resolution in a modular, entity-centered model. In
Human Language Technologies: The 2010 Annual
Conference of the North American Chapter of the
Association for Computational Linguistics, pages
385?393. Association for Computational Linguis-
tics.
P. Koehn. 2004. Statistical signicance tests for ma-
chine translation evaluation. In Proc. of the Annual
Meeting of the Association for Computational Lin-
guistics.
Heeyoung Lee, Yves Peirsman, Angel Chang,
Nathanael Chambers, Mihai Surdeanu, and Dan Ju-
rafsky. 2011. Stanford?s multi-pass sieve coref-
erence resolution system at the conll-2011 shared
task. In Proceedings of the Fifteenth Conference on
Computational Natural Language Learning: Shared
Task, pages 28?34. Association for Computational
Linguistics.
Nuno Mamede and Pedro Chaleira. 2004. Char-
acter identification in children stories. In Ad-
vances in Natural Language Processing, pages 82?
90. Springer.
A. F. T. Martins, N. A. Smith, and E. P. Xing. 2009.
Concise Integer Linear Programming Formulations
for Dependency Parsing. In Proc. of Annual Meet-
ing of the Association for Computational Linguis-
tics.
A. F. T. Martins, N. A. Smith, P. M. Q. Aguiar, and
M. A. T. Figueiredo. 2011. Dual Decomposition
with Many Overlapping Components. In Proc. of
Empirical Methods for Natural Language Process-
ing.
A. F. T. Martins, M. B. Almeida, and N. A. Smith.
2013. Turning on the turbo: Fast third-order non-
projective turbo parsers. In Proc. of the Annual
Meeting of the Association for Computational Lin-
guistics.
47
Vincent Ng and Claire Cardie. 2002. Improving ma-
chine learning approaches to coreference resolution.
In Proceedings of the 40th Annual Meeting on Asso-
ciation for Computational Linguistics, pages 104?
111. Association for Computational Linguistics.
V. Ng. 2010. Supervised noun phrase coreference re-
search: The first fifteen years. In Proc. of the An-
nual Meeting of the Association for Computational
Linguistics.
Tim O?Keefe, Silvia Pareti, James R Curran, Irena Ko-
prinska, and Matthew Honnibal. 2012. A sequence
labelling approach to quote attribution. In Pro-
ceedings of the 2012 Joint Conference on Empirical
Methods in Natural Language Processing and Com-
putational Natural Language Learning, pages 790?
799. Association for Computational Linguistics.
Silvia Pareti, Tim O?Keefe, Ioannis Konstas, James R.
Curran, and Irena Koprinska. 2013. Automatically
detecting and attributing indirect quotations. In Pro-
ceedings of the 2013 Conference on Empirical Meth-
ods in Natural Language Processing.
Silvia Pareti. 2012. A database of attribution relations.
In LREC, pages 3213?3217.
Bruno Pouliquen, Ralf Steinberger, and Clive Best.
2007. Automatic detection of quotations in multi-
lingual news. In Proceedings of Recent Advances in
Natural Language Processing, pages 487?492.
Sameer Pradhan, Lance Ramshaw, Mitchell Marcus,
Martha Palmer, Ralph Weischedel, and Nianwen
Xue. 2011. Conll-2011 shared task: Modeling un-
restricted coreference in ontonotes. In Proceedings
of the Fifteenth Conference on Computational Nat-
ural Language Learning: Shared Task, pages 1?27.
Association for Computational Linguistics.
Sameer Pradhan, Alessandro Moschitti, Nianwen Xue,
Olga Uryupina, and Yuchen Zhang. 2012. Conll-
2012 shared task: Modeling multilingual unre-
stricted coreference in ontonotes. In Proceedings
of the Joint Conference on EMNLP and CoNLL:
Shared Task, pages 1?40.
Rashmi Prasad, Nikhil Dinesh, Alan Lee, Eleni Milt-
sakaki, Livio Robaldo, Aravind K Joshi, and Bon-
nie L Webber. 2008. The penn discourse treebank
2.0. In LREC. Citeseer.
Altaf Rahman and Vincent Ng. 2011. Narrowing the
modeling gap: A cluster-ranking approach to coref-
erence resolution. Journal of Artificial Intelligence
Research, 40(1):469?521.
Luis Sarmento, Sergio Nunes, and E Oliveira. 2009.
Automatic extraction of quotes and topics from news
feeds. In 4th Doctoral Symposium on Informatics
Engineering.
Nathan Schneider, Rebecca Hwa, Philip Gianfortoni,
Dipanjan Das, Michael Heilman, Alan W Black,
Frederick L Crabbe, and Noah A Smith. 2010. Vi-
sualizing topical quotations over time to understand
news discourse. Technical report, Technical Report
CMU-LTI-01-103, CMU.
Wee Meng Soon, Hwee Tou Ng, and Daniel
Chung Yong Lim. 2001. A machine learning ap-
proach to coreference resolution of noun phrases.
Computational linguistics, 27(4):521?544.
Veselin Stoyanov, Nathan Gilbert, Claire Cardie, and
Ellen Riloff. 2009. Conundrums in noun phrase
coreference resolution: Making sense of the state-
of-the-art. In Proceedings of the Joint Conference
of the 47th Annual Meeting of the ACL and the
4th International Joint Conference on Natural Lan-
guage Processing of the AFNLP: Volume 2-Volume
2, pages 656?664. Association for Computational
Linguistics.
Yannick Versley, Simone Paolo Ponzetto, Massimo
Poesio, Vladimir Eidelman, Alan Jern, Jason Smith,
Xiaofeng Yang, and Alessandro Moschitti. 2008.
Bart: A modular toolkit for coreference resolution.
In Proceedings of the 46th Annual Meeting of the As-
sociation for Computational Linguistics on Human
Language Technologies: Demo Session, pages 9?12.
Association for Computational Linguistics.
48
Proceedings of the 8th International Workshop on Semantic Evaluation (SemEval 2014), pages 673?677,
Dublin, Ireland, August 23-24, 2014.
TUGAS: Exploiting Unlabelled Data for Twitter Sentiment Analysis
Silvio Amir
+
, Miguel Almeida
??
, Bruno Martins
+
, Jo
?
ao Filgueiras
+
, and M
?
ario J. Silva
+
+
INESC-ID, Instituto Superior T?ecnico, Universidade de Lisboa, Portugal
?
Priberam Labs, Alameda D. Afonso Henriques, 41, 2
o
, 1000-123 Lisboa, Portugal
?
Instituto de Telecomunicac??oes, Instituto Superior T?ecnico, Universidade de Lisboa, Portugal
samir@inesc-id.pt, miguel.almeida@priberam.pt, bruno.g.martins@tecnico.ulisboa.pt
jfilgueiras@inesc-id.pt, mjs@inesc-id.pt
Abstract
This paper describes our participation in
the message polarity classification task of
SemEval 2014. We focused on exploiting
unlabeled data to improve accuracy, com-
bining features leveraging word represen-
tations with other, more common features,
based on word tokens or lexicons. We
analyse the contribution of the different
features, concluding that unlabeled data
yields significant improvements.
1 Introduction
Research in exploiting social media for mea-
suring public opinion, evaluating popularity of
products and brands, anticipating stock-market
trends, or predicting elections showed promising
results (O?Connor et al., 2010; Mitchell et al.,
2013). However, this type of content poses a par-
ticularly challenging problem for text analysis sys-
tems. Typical messages show heavy use of Inter-
net slang, emoticons and other abbreviations and
discourse conventions. The lexical variation intro-
duced by this creative use of language, together
with the unconventional spelling and occasional
typos, leads to very large vocabularies. On the
other hand, messages are very short, and there-
fore word feature representations tend to become
very sparse, degrading the performance of ma-
chine learned classifiers.
The growing interest in this problem motivated
the creation of a shared task for Twitter Sentiment
Analysis in the 2013 edition of SemEval. The
Message Polarity Classification task was formal-
ized as follows: Given a message, decide whether
the message is of positive, negative, or neutral sen-
timent. For messages conveying both a positive
This work is licensed under a Creative Commons Attribution
4.0 International Licence. Page numbers and proceedings
footer are added by the organisers. Licence details: http:
//creativecommons.org/licenses/by/4.0/
Positive Neutral Negative
Train 2014 3230 4109 1265
Tweets 2013 1572 1640 601
Tweets 2014 982 669 202
SMS 2013 492 1207 394
Tweets Sarcasm 2014 33 13 40
LiveJournal 2014 427 411 304
Table 1: Number of examples per class in each
SemEval dataset. The first row represents all train-
ing data; the other rows are sets used for testing.
and negative sentiment, whichever is the stronger
sentiment should be chosen (Nakov et al., 2013).
We describe our participation on the 2014 edi-
tion of this task, for which a set of manually la-
belled messages was created. Complying with the
Twitter policies for data access, the corpus was
distributed as a list of message IDs and each par-
ticipant was responsible for downloading the ac-
tual tweets. Using the provided script, we col-
lected a training set with 8604 tweets. After sub-
mission, the 2014 test sets were also made avail-
able. Along with the Tweets 2014 test set, evalu-
ation was also performed on a set of tweets with
sarcasm, on a set of LiveJournal blog entries, and
on sets of tweets and SMS messages from the 2013
edition of the task. Table 1 shows the class distri-
bution for each of these datasets.
In the 2013 edition (task 2B), the NRC-Canada
system (Mohammad et al., 2013) earned first place
by scoring 69.02% on the Official SemEval metric
(see Section 4) with a significant margin with re-
spect to the other systems: the second (G?unther
and Furrer, 2013) and third (Reckman et al., 2013)
best systems scored 65.27% and 64.86%, respec-
tively. The main novelty in the NRC-Canada sys-
tem was the use of sentiment lexicons, specific
for the Twitter domain, generated from unlabeled
tweets using emoticons and hashtags as indicators
of sentiment. They found that these lexicons had a
strong impact on the results ? more than word and
673
character n-grams.
The automatically induced lexicons are a way
to use information from unlabeled data to aid in
the classification task. In our approach, we take
this reasoning further, and focus on the impact of
various ways to incorporate knowledge from un-
labeled data. This allows us to mimic many real-
world scenarios where labelled data is scarce but
unlabeled data is plentiful.
2 Word Representations
In text classification it is common to represent doc-
uments as bags-of-words, i.e., as unordered col-
lections of words. However, in the case of very
short social media texts, these representations be-
come less effective, as they lead to increased data
sparseness. We focused our experiments in com-
paring and complementing these approaches with
denser representations, which we now describe.
2.1 Bag-Of-Words and ?BM25
In a representation based on bags-of-words,
each message is represented as a vector m =
{w
1
, w
2
, ..., w
n
} ? R
V
, where V is the size of
the vocabulary. In order to have weights that re-
flect how relevant a word is to each of the classes,
we weighted the individual terms according to the
?BM25 heuristic (Paltoglou and Thelwall, 2010):
?BM25(w
i
) = tf
i
? log
(
(N
p
?df
i,p
+s)?df
i,n
+s
(N
n
?df
i,n
+s)?df
i,p
+s
)
, (1)
where tf
i
represents the frequency of term i in the
message, N
a
is the size of corpus a, df
i,a
is the
document frequency of term i in the corpus a (i.e.,
in one of two subsets for the training data, corre-
sponding to either positive or negative messages),
and s is a smoothing constant, which we set to
0.5. This term weighting function was previously
shown to be effective for sentiment analysis.
2.2 Brown Clusters
Brown et al. (1992) proposed a greedy agglomer-
ative hierarchical clustering procedure that groups
words to maximize the mutual information of bi-
grams. Clusters are initialized as consisting of a
single word each, and are then greedily merged ac-
cording to a mutual information criterion, to form
a lower-dimensional representation of a vocabu-
lary. The hierarchical nature of the clustering al-
lows words to be represented at different levels in
the hierarchy. This approach provides a denser
representation of the messages, mitigating the fea-
ture sparseness problem. We used a publicly avail-
able
1
set of 1000 Brown clusters induced from a
corpus of 56 million Twitter messages.
We leveraged the word clusters by mapping
each word to the corresponding cluster, and we
then represented each message as a bag-of-clusters
vector in R
K
, where K = 1000 is the number
of clusters. These word cluster features were also
weighted with the ?BM25 scheme.
2.3 Concise Semantic Analysis
Concise Semantic Analysis is a form of term
and document representation that assigns, to each
term, its weight on each of the classes (Li et al.,
2011). These weights, computed from the fre-
quencies of the term on the training data, reflect
how associated the term is to each class. The
weight of term j in class c is given by (Lopez-
Monroy et al., 2013):
w
cj
=
?
k?P
c
log
2
(
1 +
tf
kj
len(k)
)
, (2)
where P
c
is the set of documents with label c
and tf
kj
is the term frequency of term j in doc-
ument k. To prevent labels with a higher number
of examples, or terms with higher frequencies, to
have stronger weights, an additional normalization
step is performed to obtain nw
cj
, the normalized
weight of term j in class c:
nw
cj
=
w
cj
?
l?L
w
lj
?
?
t?T
w
ct
. (3)
In the formula, L is the set of class labels and T is
the set of terms, making w
lj
the weight of term
j for a class l, and w
ct
the weight of a term t
in class c. After defining every term as a vector
t
j
= {nw
1j
, . . . , nw
Cj
} ? R
C
, where C is the
number of classes, each message m is represented
by summing each of its terms? weight vectors:
m
csa
=
?
j?m
tf
j
len(m)
? t
j
. (4)
In the formula, tf
j
is the frequency of term j in m.
2.4 Dense Word Vectors
Efficient approaches have recently been intro-
duced to train neural networks capable of produc-
ing continuous representations of words (Mikolov
1
http://www.ark.cs.cmu.edu/TweetNLP/
674
Lexicon #1-grams #2-grams #pairs
Bing Liu 6789 - -
MPQA 8222 - -
SentiStrength 2546 - -
NRC EmoLex 14177 - -
Sentiment140 62468 677698 480010
NRC HashSent 54129 316531 308808
Table 2: Number of unigrams, bigrams, and collo-
cation pairs, in the lexicons used in our system.
et al., 2013). These approaches allow fast train-
ing of projections from a representation based on
bags-of-words, where vectors have very high di-
mension (of the order of 10
4
), but are also very
sparse and integer-valued, to vectors of much
lower dimensions (of the order of 10
2
), with full
density and continuous values.
To induce word embeddings, a corpus of 17 mil-
lion Twitter messages was collected with the Twit-
ter crawler of Boanjak et al. (2012). Then, us-
ing word2vec
2
, we induced representations for the
word tokens occurring in the messages. All the to-
kens were represented as vectors w
j
? R
n
, with
n = 100. A message was modeled as the sum of
the vector representations of the individual words:
m
vec
=
?
j?m
w
j
. (5)
We also created a polarity class vector p
c
for each
class c, defined as:
p
c
=
1
N
c
?
m?c
m
vec
, (6)
where m is a message of class c and N
c
is the total
number of instances in class c. These vectors can
be interpreted as prototypes of their classes, and
are used in the classVec features described below.
3 The TUGAS System
We now describe the TUGAS approach, detailing
the considered features and our modeling choices.
3.1 Word Features
To reduce the feature space of the model,
messages were lower-cased, Twitter user men-
tions (@username) were replaced with the to-
ken <USER> and URLs were replaced with
the <URL> token. We also normalized words
to include at most 3 repeated characters (e.g.,
2
https://code.google.com/p/word2vec/
?helloooooo!? to ?hellooo!?). Following Pang et
al. (2002), negation was directly integrated into
the word representations. All the tokens occurring
between a negation word and the next punctuation
mark, were suffixed with the NEG annotation.
We used the following groups of features:
? bow-uni: vector of word unigrams
? bow-bc: vector of Brown word clusters
? csa: Concise Semantic Analysis vector m
csa
? wordVec: word2vec message vector m
vec
? classVec: Euclidean distance between mes-
sage vector m
vec
and each class vector p
c
3.2 Lexicon Features
The document model was enriched with features
that take into account the presence of words with a
known prior polarity, such as happy or sad. We in-
cluded words from manually annotated sentiment
lexicons: Bing Liu Opinion Lexicon (Hu and Liu,
2004), MPQA (Wilson et al., 2005) and the NRC
Emotion Lexicon (Mohammad and Turney, 2013).
We also used the two automatically generated lex-
icons from Mohammad et al. (2013): the NRC
Hashtag Sentiment Lexicon and the Sentiment140
Lexicon. Table 2 summarizes the number of terms
of each lexicon.
As Mohammad et al. (2013), we added the fol-
lowing set of lexicon features, for each lexicon,
and for each combination of negated/non-negated
words and positive/negative polarity.
? The sum of the sentiment scores of all
(negated/non-negated) terms with (posi-
tive/negative) sentiment
? The largest of those scores
? The sentiment score of the last word in the
message that is also present in the lexicon
? The number of terms within the lexicon
Notice that terms can be unigrams, bigrams, and
collocations pairs. A group of these features was
computed for each of the sentiment lexicons.
3.3 Syntactic Features
We extracted syntactic features aimed at the Twit-
ter domain, such as the use of heavy punctuation,
emoticons and character repetition. Concretely,
the following features were computed from the
original Twitter messages:
? Number of words originally with more than 3
repeated characters
? Number of sequences of exclamation marks
and/or question marks
675
Tweets Test 2013 Tweets Test 2014 SMS 2013 Live Journal 2014 Tweets Sarcasm 2014
Features Acc F1 Official Acc F1 Official Acc F1 Official Acc F1 Official Acc F1 Official
bow-uni 65.62 59.30 54.60 69.94 66.30 65.60 68.80 62.40 54.90 60.42 58.30 56.60 47.67 43.90 41.50
submitted 69.55 67.50 65.60 71.45 69.00 69.00 70.57 67.60 62.70 68.21 68.20 69.80 53.49 50.10 52.90
- lexicons 66.90 64.30 61.70 70.37 67.00 66.40 66.46 63.50 58.30 64.27 64.20 65.50 48.84 45.10 47.00
- classVec 69.37 67.30 65.40 71.83 69.30 69.60 69.14 66.60 62.10 67.51 67.50 69.30 53.49 50.10 52.90
- wordVec 69.63 67.70 66.00 70.32 67.70 68.00 66.79 64.90 60.90 68.04 68.00 69.70 53.49 50.50 53.50
- bow-bc 68.06 66.40 65.10 67.40 64.30 65.30 67.89 65.20 60.40 68.30 68.30 70.00 52.33 49.90 49.90
+ syntactic 69.58 67.60 65.70 71.24 68.30 68.50 70.38 67.40 62.40 67.95 68.00 69.70 52.33 48.80 50.00
+ csa 67.45 63.70 60.50 70.10 67.30 67.50 71.48 67.60 62.10 66.11 66.00 68.30 53.49 51.30 50.30
+ bow-uni 67.69 62.50 58.50 70.64 67.30 66.70 72.77 67.10 60.40 67.60 67.20 67.10 51.16 48.00 43.90
Table 3: Impact of removing or adding groups of features. The row marked as submitted, in bold, is the
one that we submitted to the shared task. The bold column is the official score used to rank participants.
? Number of positive/negative emoticons, de-
tected with a pre-existing regular expression
3
? Number of capitalized words
3.4 Model Training
We used the L2-regularized logistic regression im-
plementation from scikit-learn
4
. Given a set of m
instance-label pairs (x
i
, y
i
), with i = 1, . . . ,m,
x
i
? R
n
, and y
i
? {?1,+1}, learning the clas-
sifier involves solving the following optimization
problem, where C > 0 is a penalty parameter.
min
w
1
2
w
?
w + C
m
?
i=1
log(1 + e
?y
i
w
?
x
i
). (7)
In scikit-learn, the problem is solved through
a trust region Newton method, using a wrapper
over the implementation available in the liblin-
ear
5
package. For multi-class problems, scikit-
learn uses the one-vs-the-rest strategy. This par-
ticular implementation also suports the introduc-
tion of class weights, which we set to be inversely
proportional to the class frequency in the training
data, thus making each class equally important.
The selection of groups of features to be in-
cluded in the submitted run, as well as the tun-
ing of the regularization constant, were obtained
by cross-validation on the training dataset.
4 Results
We report results using the following metrics:
? Accuracy, defined as the percentage of
tweets correctly classified.
? Overall F1, computed by averaging the F1
score of all three classes.
? The Official SemEval score, computed by
averaging the F1 scores of the positive and
negative classes (Nakov et al., 2013).
3
http://sentiment.christopherpotts.net/
4
http://scikit-learn.org/
5
http://www.csie.ntu.edu.tw/
?
cjlin/liblinear/
Feature group Acc F1 Official
bow-bc 66.33 63.30 60.30
wordVec 62.34 60.00 57.90
bow-uni 65.62 59.30 54.60
csa 61.58 56.70 52.90
Table 4: Performance comparison using different
word representations in isolation.
We tried including or excluding various groups
of features, and obtained the best results on the
training set using Brown clusters (bow-bc), lexi-
con features (lexicon), word2vec word represen-
tations (wordVec), and the Euclidean distance be-
tween the word2vec representation and each class
vector (classVec). These features were the ones
used in our submission. Inclusion of syntactic
features (syntactic), Concise Semantic Analysis
(csa), and word unigrams (bow-uni) was found to
decrease performance during cross-validation, and
thus these features were not included.
Table 4 shows the results on the Twitter 2014
test set using only a single group of word represen-
tation features to train the model, from each of the
techniques introduced in Section 2. This table sug-
gests that exploiting unlabeled data is beneficial,
as representing words through their Brown clus-
ters (bow-bc) or through word2vec (wordVec)
yields better results than unigrams or CSA.
Table 3 shows results on five different test sets,
including two from the 2013 challenge (Nakov et
al., 2013), when features are added or removed
from the official submission, one group at a time.
Adding representations like bow-uni or csa actu-
ally hurts the performance, suggesting that, given
the relatively small set of training instances, using
coarse-level features in isolation, such as Brown
clusters, can yield better results.
More importantly, we verify that lexicon-based
and Brown cluster features have the largest impact
676
(2.6% and 3.7%, respectively, in the official met-
ric). These results indicate that leveraging unla-
beled data yields significant improvements.
5 Conclusions
This paper describes the participation of the
TUGAS team in the message polarity classifica-
tion task of SemEval 2014. We showed that there
are significant gains in leveraging unlabeled data
for the task of classifying the sentiment of Twit-
ter texts. Our score of 69% ranks at fifth place in
42 submissions, roughly 2% points below the top
score of 70.96%. We believe that the direction of
leveraging unlabeled data is still vastly unexplored
and, for future work, we intend to: (a) experi-
ment with semi-supervised learning approaches,
further exploiting unlabeled tweets; and (b) make
use of domain adaptation strategies to leverage on
labelled non-Twitter data.
Acknowledgements
This work was partially supported by the
EU/FEDER programme, QREN/POR Lis-
boa (Portugal), under the Intelligo project
(contract 2012/24803). The researchers from
INESC-ID were supported by Fundac??ao para
a Ci?encia e Tecnologia (FCT), through con-
tracts Pest-OE/EEI/LA0021/2013, EXCL/EEI-
ESS/0257/2012 (DataStorm), project grants
PTDC/CPJ-CPO/116888/2010 (POPSTAR), and
EXPL/EEI-ESS/0427/2013 (KD-LBSN), and
Ph.D. scholarship SFRH/BD/89020/2012.
References
Matko Boanjak, Eduardo Oliveira, Jos?e Martins, Ed-
uarda Mendes Rodrigues, and Lu??s Sarmento. 2012.
Twitterecho: a distributed focused crawler to sup-
port open research with twitter data. In 21st Interna-
tional Conference Companion on World Wide Web,
pages 1233?1240.
Peter F. Brown, Peter V. Desouza, Robert L. Mer-
cer, Vincent J. Della Pietra, and Jenifer C. Lai.
1992. Class-based n-gram models of natural lan-
guage. Computational Linguistics, 18(4):467?479.
Tobias G?unther and Lenz Furrer. 2013. GU-MLT-
LT: Sentiment analysis of short messages using lin-
guistic features and stochastic gradient descent. In
7th International Workshop on Semantic Evaluation,
pages 328?332.
Minqing Hu and Bing Liu. 2004. Mining and sum-
marizing customer reviews. In 10th ACM SIGKDD
International Conference on Knowledge Discovery
and Data Mining, pages 168?177.
Zhixing Li, Zhongyang Xiong, Yufang Zhang, Chuny-
ong Liu, and Kuan Li. 2011. Fast text categorization
using concise semantic analysis. Pattern Recogni-
tion Letters, 32(3):441?448.
?
Adrian Pastor Lopez-Monroy, Manuel Montes-y
Gomez, Hugo Jair Escalante, Luis Villasenor-
Pineda, and Esa?u Villatoro-Tello. 2013. INAOE?s
participation at PAN?13: Author profiling task. In
CLEF 2013 Evaluation Labs and Workshop.
Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg Cor-
rado, and Jeffrey Dean. 2013. Distributed represen-
tations of words and phrases and their composition-
ality. In 27th Annual Conference on Neural Infor-
mation Processing Systems, pages 3111?3119.
Lewis Mitchell, Kameron Decker Harris, Morgan R
Frank, Peter Sheridan Dodds, and Christopher M
Danforth. 2013. The geography of happiness:
connecting twitter sentiment and expression, de-
mographics, and objective characteristics of place.
PLoS ONE, 8(5):e64417.
Saif M Mohammad and Peter D Turney. 2013. Crowd-
sourcing a word?emotion association lexicon. Com-
putational Intelligence, 29(3):436?465.
Saif Mohammad, Svetlana Kiritchenko, and Xiaodan
Zhu. 2013. NRC-Canada: building the state-of-
the-art in sentiment analysis of tweets. In 7th Inter-
national Workshop on Semantic Evaluation, pages
321?327.
Preslav Nakov, Sara Rosenthal, Zornitsa Kozareva,
Veselin Stoyanov, Alan Ritter, and Theresa Wilson.
2013. SemEval-2013 task 2: Sentiment analysis in
Twitter. In 7th International Workshop on Semantic
Evaluation, pages 312?320.
Brendan O?Connor, Ramnath Balasubramanyan,
Bryan R Routledge, and Noah A Smith. 2010.
From tweets to polls: Linking text sentiment to
public opinion time series. In 4th International
AAAI Conference on Weblogs and Social Media,
pages 122?129.
Georgios Paltoglou and Mike Thelwall. 2010. A study
of information retrieval weighting schemes for sen-
timent analysis. In 48th Annual Meeting of the Asso-
ciation for Computational Linguistics, pages 1386?
1395.
Bo Pang, Lillian Lee, and Shivakumar Vaithyanathan.
2002. Thumbs up?: sentiment classification using
machine learning techniques. In ACL-02 Confer-
ence on Empirical Methods in Natural Language
Processing, pages 79?86.
Hilke Reckman, Baird Cheyanne, Jean Crawford,
Richard Crowell, Linnea Micciulla, Saratendu Sethi,
and Fruzsina Veress. 2013. teragram: Rule-based
detection of sentiment phrases using SAS sentiment
analysis. In 7th International Workshop on Seman-
tic Evaluation, pages 513?519.
Theresa Wilson, Janyce Wiebe, and Paul Hoffmann.
2005. Recognizing contextual polarity in phrase-
level sentiment analysis. In Conference on Hu-
man Language Technology and Empirical Methods
in Natural Language Processing, pages 347?354.
677
