Proceedings of the 13th Conference of the European Chapter of the Association for Computational Linguistics, pages 77?81,
Avignon, France, April 23 - 27 2012. c?2012 Association for Computational Linguistics
Automatic Analysis of Patient History Episodes in Bulgarian Hospital
Discharge Letters
Svetla Boytcheva
State University of Library Studies
and Information Technologies
and IICT-BAS
svetla.boytcheva@gmail.com
Galia Angelova, Ivelina Nikolova
Institute of Information and
Communication Technologies (IICT),
Bulgarian Academy of Sciences (BAS)
{galia,iva}@lml.bas.bg
Abstract
This demo presents Information Extraction
from discharge letters in Bulgarian lan-
guage. The Patient history section is au-
tomatically split into episodes (clauses be-
tween two temporal markers); then drugs,
diagnoses and conditions are recognised
within the episodes with accuracy higher
than 90%. The temporal markers, which re-
fer to absolute or relative moments of time,
are identified with precision 87% and re-
call 68%. The direction of time for the
episode starting point: backwards or for-
ward (with respect to certain moment ori-
enting the episode) is recognised with pre-
cision 74.4%.
1 Introduction
Temporal information processing is a challenge in
medical informatics (Zhou and Hripcsak, 2007)
and (Hripcsak et al 2005). There is no agree-
ment about the features of the temporal models
which might be extracted automatically from free
texts. Some sophisticated approaches aim at the
adaptation of TimeML-based tags to clinically-
important entities (Savova et al 2009) while
others identify dates and prepositional phrases
containing temporal expressions (Angelova and
Boytcheva, 2011). Most NLP prototypes for auto-
matic temporal analysis of clinical narratives deal
with discharge letters.
This demo presents a prototype for automatic
splitting of the Patient history into episodes and
extraction of important patient-related events that
occur within these episodes. We process Elec-
tronic Health Records (EHRs) of diabetic pa-
tients. In Bulgaria, due to centralised regulations
on medical documentation (which date back to
the 60?s of the last century), hospital discharge
letters have a predefined structure (Agreement,
2005). Using the section headers, our Informa-
tion Extraction (IE) system automatically iden-
tifies the Patient history (Anamnesis). It con-
tains a summary, written by the medical expert
who hospitalises the patient, and documents the
main phases in diabetes development, the main
interventions and their effects. The splitting al-
gorithm is based on the assumption that the Pa-
tient history texts can be represented as a struc-
tured sequence of adjacent clauses which are po-
sitioned between two temporal markers and re-
port about some important events happening in
the designated period. The temporal markers are
usually accompanied by words signaling the di-
rection of time (backward or forward). Thus we
assume that the episodes have the following struc-
ture: (i) reference point, (ii) direction, (iii) tem-
poral expression, (iv) diagnoses, (v) symptoms,
syndromes, conditions, or complains; (vi) drugs;
(vii) treatment outcome. The demo will show
how our IE system automatically fills in the seven
slots enumerated above. Among all symptoms
and conditions, which are complex phrases and
paraphrases, the extraction of features related to
polyuria and polydipsia, weight change and blood
sugar value descriptions will be demonstrated.
Our present corpus contains 1,375 EHRs.
2 Recognition of Temporal Markers
Temporal information is very important in clini-
cal narratives: there are 8,248 markers and 8,249
words/phrases signaling the direction backwards
or forward in the corpus (while the drug name oc-
currences are 7,108 and the diagnoses are 7,565).
77
In the hospital information system, there are
two explicitly fixed dates: the patient birth date
and the hospitalisation date. Both of them are
used as antecedents of temporal anaphora:
? the hospitalisation date is a reference point
for 37.2% of all temporal expressions (e.g.
?since 5 years?, ?(since) last March?, ?3 years
ago?, ?two weeks ago?, ?diabetes duration 22
years?, ?during the last 3 days? etc.). For
8.46% of them, the expression allows for cal-
culation of a particular date when the corre-
sponding event has occurred;
? the age (calculated using the birth date) is a
reference point for 2.1% of all temporal ex-
pressions (e.g. ?diabetes diagnosed in the
age of 22 years?).
Some 28.96% of the temporal markers refer to an
explicitly specified year which we consider as an
absolute reference. Another 15.1% of the markers
contain reference to day, month and year, and in
this way 44.06% of the temporal expressions ex-
plicitly refer to dates. Adding to these 44.06%
the above-listed referential citations of the hos-
pitalization date and the birth date, we see that
83.36% of the temporal markers refer to explic-
itly specified moments of time and can be seen
as absolute references. We note that diabetes is a
chronicle disease and references like ?diabetes di-
agnosed 30 years ago? are sufficiently precise to
be counted as explicit temporal pointers.
The anaphoric expressions refer to events de-
scribed in the Patient history section: these ex-
pressions are 2.63% of the temporal markers (e.g.
?20 days after the operation?, ?3 years after di-
agnosing the diabetes?, ?about 1 year after that?,
?with the same duration? etc.). We call these ex-
pressions relative temporal markers and note that
much of our temporal knowledge is relative and
cannot be described by a date (Allen, 1983).
The remaining 14% of the temporal markers
are undetermined, like ?many years ago?, ?before
the puberty?, ?in young age?, ?long-duration dia-
betes?. About one third of these markers refer to
periods e.g. ?for a period of 3 years?, ?with du-
ration of 10-15 years? and need to be interpreted
inside the episode where they occur.
Identifying a temporal expression in some sen-
tence in the Patient history, we consider it as a
signal for a new episode. Thus it is very impor-
tant to recognise automatically the time anchors
of the events described in the episode: whether
they happen at the moment, designated by the
marker, after or before it. The temporal markers
are accompanied by words signaling time direc-
tion backwards or forward as follows:
? the preposition ?since? (ot) unambiguously
designates the episode startpoint and the
time interval when the events happen. It oc-
curs in 46.78% of the temporal markers;
? the preposition ?in? (prez) designates the
episode startpoint with probability 92.14%.
It points to a moment of time and often
marks the beginning of a new period. But the
events happening after ?in? might refer back-
wards to past moments, like e.g. ?diabetes
diagnosed in 2004, (as the patient) lost 20 kg
in 6 months with reduced appetite?. So there
could be past events embedded in the ?in?-
started episodes which should be considered
as separate episodes (but are really difficult
for automatic identification);
? the preposition ?after? (sled) unambigu-
ously identifies a relative time moment ori-
ented to the immediately preceding event
e.g. ?after that? with synonym ?later? e.g.
?one year later?. Another kind of reference
is explicit event specification e.g. ?after the
Maninil has been stopped?;
? the preposition ?before? or ?ago? (predi) is
included in 11.2% of all temporal markers in
our corpus. In 97.4% of its occurrences it is
associated to a number of years/months/days
and refers to the hospitalisation date, e.g.
?3 years ago?, ?two weeks ago?. In 87.6%
of its occurrences it denotes starting points
in the past after which some events hap-
pen. However, there are cases when ?ago?
marks an endpoint, e.g. ?Since 1995 the hy-
pertony 150/100 was treated by Captopril
25mg, later by Enpril 10mg but two years
ago the therapy has been stopped because of
hypotony?;
? the preposition ?during, throughout? (v
prodlenie na) occurs relatively rarely,
only in 1.02% of all markers. It is usually
associated with explicit time period.
78
3 Recognition of Diagnoses and Drugs
We have developed high-quality extractors of di-
agnoses, drugs and dosages from EHRs in Bulgar-
ian language. These two extracting components
are integrated in our IE system which processes
Patient history episodes.
Phrases designating diagnoses are juxtaposed
to ICD-10 codes (ICD, 10). Major difficulties in
matching ICD-10 diseases to text units are due to
(i) numerous Latin terms written in Latin or Cyril-
lic alphabets; (ii) a large variety of abbreviations;
(iii) descriptions which are hard to associate to
ICD-10 codes, and (iv) various types of ambigu-
ity e.g. text fragments that might be juxtaposed to
many ICD-10 labels.
The drug extractor finds in the EHR texts 1,850
brand names of drugs and their daily dosages.
Drug extraction is based on algorithms using reg-
ular expressions to describe linguistic patterns.
The variety of textual expressions as well as the
absent or partial dosage descriptions impede the
extraction performance. Drug names are juxta-
posed to ATC codes (ATC, 11).
4 IE of symptoms and conditions
Our aim is to identify diabetes symptoms and
conditions in the free text of Patient history.
The main challenge is to recognise automatically
phrases and paraphrases for which no ?canonical
forms? exist in any dictionary. Symptom extrac-
tion is done over a corpus of 1,375 discharge
letters. We analyse certain dominant factors when
diagnosing with diabetes - values of blood sugar,
body weight change and polyuria, polydipsia
descriptions. Some examples follow:
(i) Because of polyuria-polydipsia syndrome,
blood sugar was - 19 mmol/l.
(ii) ... on the background of obesity - 117 kg...
The challenge in the task is not only to iden-
tify sentences or phrases referring to such expres-
sions but to determine correctly the borders of
the description, recognise the values, the direction
of change - increased or decreased value and to
check whether the expression is negated or not.
The extraction of symptoms is a hybrid method
which includes document classification and rule-
based pattern recognition. It is done by a 6-
steps algorithm as follows: (i) manual selection
of symptom descriptions from a training corpus;
(ii) compiling a list of keyterms per each symp-
tom; (iii) compiling probability vocabularies for
left- and right-border tokens per each symptom
description according to the frequencies of the
left- and right-most tokens in the list of symp-
tom descriptions; (iv) compiling a list of fea-
tures per each symptom (these are all tokens avail-
able in the keyterms list without the stop words);
(v) performing document classification for select-
ing the documents containing the symptom of in-
terest based on the feature selection in the previ-
ous step and (vi) selection of symptom descrip-
tions by applying consecutively rules employing
the keyterms vocabulary and the left- and right-
border tokens vocabularies. For overcoming the
inflexion of Bulgarian language we use stemming.
The last step could be actually segmented into
five subtasks such as: focusing on the expressions
which contain the terms; determining the scope of
the expressions; deciding on the condition wors-
ening - increased, decreased values; identifying
the values - interval values, simple values, mea-
surement units etc. The final subtask is to deter-
mine whether the expression is negated or not.
5 Evaluation results
The evaluation of all linguistic modules is per-
formed in close cooperation with medical experts
who assess the methodological feasibility of the
approach and its practical usefulness.
The temporal markers, which refer to absolute
or relative moments of time, are identified with
precision 87% and recall 68%. The direction of
time for the episode events: backwards or for-
ward (with respect to certain moment orienting
the episode) is recognised with precision 74.4%.
ICD-10 codes are associated to phrases with
precision 84.5%. Actually this component has
been developed in a previous project where it
was run on 6,200 EHRs and has extracted 26,826
phrases from the EHR section Diagnoses; correct
ICD-10 codes were assigned to 22,667 phrases.
In this way the ICD-10 extractor uses a dictio-
nary of 22,667 phrases which designate 478 ICD-
10 disease names occurring in diabetic EHRs
(Boytcheva, 2011a).
Drug names are juxtaposed to ATC codes with
f-score 98.42%; the drug dosage is recognised
with f-score 93.85% (Boytcheva, 2011b). This
result is comparable to the accuracy of the best
79
systems e.g. MedEx which extracts medication
events with 93.2% f-score for drug names, 94.5%
for dosage, 93.9% for route and 96% for fre-
quency (Xu et al 2010). We also identify the
drugs taken by the patient at the moment of
hospitalisation. This is evaluated on 355 drug
names occurring in the EHRs of diabetic pa-
tients. The extraction is done with f-score 94.17%
for drugs in Patient history (over-generation 6%)
(Boytcheva et al 2011).
In the separate phases of symptom description
extraction the f-score goes up to 96%. The com-
plete blood sugar descriptions are identified with
89% f-score; complete weight change descrip-
tions - with 75% and complete polyuria and poly-
dipsia descriptions with 90%. These figures are
comparable to the success of extracting condi-
tions, reported in (Harkema et al 2009).
6 Demonstration
The demo presents: (i) the extractors of diag-
noses, drugs and conditions within episodes and
(ii) their integration within a framework for tem-
poral segmentation of the Patient history into
episodes with identification of temporal mark-
ers and time direction. Thus the prototype auto-
matically recognises the time period, when some
events of interest have occurred.
Example 1. (April 2004) Diabetes diagnosed
last August with blood sugar values 14mmol/l.
Since then put on a diet but without following
it too strictly. Since December follows the diet
but the blood sugar decreases to 12mmol/l. This
makes it necessary to prescribe Metfodiab in the
morning and at noon 1/2t. since 15.I. Since then
the body weight has been reduced with about 6 kg.
Complains of fornication in the lower limbs.
This history is broken down into the episodes,
imposed by the time markers (table 1). Please
note that we suggest no order for the episodes.
This should be done by a temporal reasoner.
However, it is hard to cope with expressions
like the ones in Examples 2-5, where more than
one temporal marker occurs in the same sentence
with possibly diverse orientation. This requires
semantic analysis of the events happening within
the sentences. Example 2: Since 1,5 years with
growing swelling of the feet which became per-
manent and massive since the summer of 2003.
Example 3: Diabetes type 2 with duration 2 years,
diagnosed due to gradual body weight reduction
Ep reference August 2003
direction forward
expression last August
condition blood sugar 14mmol/l
Ep reference August 2003
direction forward
expression Since then
Ep reference December 2003
direction forward
expression Since December
condition blood sugar 12mmol/l
Ep reference 15.I
direction forward
expression since 15.I
treatment Metfodiab A10BA02
1/2t. morning and noon
Ep reference 15.I
direction forward
expression Since then
condition body weight reduced 6 kg.
Table 1: A patient history broken down into episodes.
during the last 5-6 years. Example 4: Secondary
amenorrhoea after a childbirth 12 months ago, af-
ter the birth with ceased menstruation and with-
out lactation. Example 5: Now hospitalised 3
years after a radioiodine therapy of a nodular goi-
ter which has been treated before that by thyreo-
static medication for about a year.
In conclusion, this demo presents one step in
the temporal analysis of clinical narratives: de-
composition into fragments that could be consid-
ered as happening in the same period of time. The
system integrates various components which ex-
tract important patient-related entities. The rela-
tive success is partly due to the very specific text
genre. Further effort is needed for ordering the
episodes in timelines, which is in our research
agenda for the future. These results will be in-
tegrated into a research prototype extracting con-
ceptual structures from EHRs.
Acknowledgments
This work is supported by grant DO/02-292 EV-
TIMA funded by the Bulgarian National Science
Fund in 2009-2012. The anonymised EHRs are
delivered by the University Specialised Hospital
of Endocrinology, Medical University - Sofia.
80
References
Allen, J. Maintaining Knowledge about Temporal In-
tervals. Comm. ACM, 26(11), 1983, pp. 832-843.
Angelova G. and S. Boytcheva. Towards Temporal
Segmentation of Patient History in Discharge Let-
ters. In Proceedings of the Second Workshop on
Biomedical Natural Language Processing, associ-
ated to RANLP-2011. September 2011, pp. 11-18.
Boytcheva, S. Automatic Matching of ICD-10 Codes
to Diagnoses in Discharge Letters. In Proceed-
ings of the Second Workshop on Biomedical Nat-
ural Language Processing, associated to RANLP-
2011. September 2011, pp. 19-26.
Boytcheva, S. Shallow Medication Extraction from
Hospital Patient Records. In Patient Safety Infor-
matics - Adverse Drug Events, Human Factors and
IT Tools for Patient Medication Safety, IOS Press,
Studies in Health Technology and Informatics se-
ries, Volume 166. May 2011, pp. 119-128.
Boytcheva, S., D. Tcharaktchiev and G. Angelova.
Contextualization in automatic extraction of drugs
from Hospital Patient Records. In A. Moen at al.
(Eds) User Centred Networked Health Case, Pro-
ceedings of MIE-2011, IOS Press, Studies in Health
Technology and Informatics series, Volume 169.
August 2011, pp. 527-531.
Harkema, H., J. N. Dowling, T. Thornblade, and W.
W. Chapman. 2009. ConText: An algorithm for de-
termining negation, experiencer, and temporal sta-
tus from clinical reports. J. Biomedical Informatics,
42(5), 2009, pp. 839-851.
Hripcsak G., L. Zhou, S. Parsons, A. K. Das, and S.
B. Johnson. Modeling electronic dis-charge sum-
maries as a simple temporal con-straint satisfaction
problem. JAMIA (J. of Amer. MI Assoc.) 2005,
12(1), pp. 55-63.
Savova, G., S. Bethard, W. Styler, J. Martin, M.
Palmer, J. Masanz, and W. Ward. Towards Tempo-
ral Relation Discovery from the Clinical Narrative.
In Proc. AMIA Annual Sympo-sium 2009, pp. 568-
572.
Xu.H., S. P Stenner, S. Doan, K. Johnson, L. Waitman,
and J. Denny. MedEx: a medication information
extraction system for clinical narratives. JAMIA
17 (2010), pp. 19-24.
Zhou L. and G. Hripcsak. Temporal reasoning with
medical data - a review with emphasis on medical
natural language processing. J. Biom. Informatics
2007, 40(2), pp. 183-202.
Agreement fixing the sections of Bulgarian hospital
discharge letters. Bulgarian Parliament, Official
State Gazette 106 (2005), Article 190(3).
ICD v.10: International Classification of Diseases
http://www.nchi.government.bg/download.html.
ATC (Anatomical Therapeutic Chemical Classification
System), http://who.int/classifications/atcddd/en.
81
Proceedings of the NAACL HLT 2012 Student Research Workshop, pages 23?28,
Montre?al, Canada, June 3-8, 2012. c?2012 Association for Computational Linguistics
Unified Extraction of Health Condition Descriptions
Ivelina Nikolova
Institute of Information and Communication Technologies
Bulgarian Academy of Sciences
2, Acad. G. Bonchev Str, 1113 Sofia
iva@lml.bas.bg
Abstract
This paper discusses a method for identifying
diabetes symptoms and conditions in free text
electronic health records in Bulgarian. The
main challenge is to automatically recognise
phrases and paraphrases for which no ?canon-
ical forms? exist in any dictionary. The fo-
cus is on extracting blood sugar level and
body weight change which are some of the
dominant factors when diagnosing diabetes.
A combined machine-learning and rule-based
approach is applied. The experiment is per-
formed on 2031 sentences of diabetes case his-
tory. The F-measure varies between 60 and
96% in the separate processing phases.
1 Introduction
Electronic Health Records (EHRs) are a rich source
of information regarding patient?s health condition
and treatment over time but they often exist as free
text only. Currently great efforts are put into struc-
turing such data and making them available for fur-
ther automatic processing, the so-called secondary
use of EHRs. Following this line of work in this
paper we present a pilot study for extracting con-
dition descriptions from EHRs in Bulgarian with the
help of NLP techniques thus making a step toward
the structuring of the free text. The specificity of
the EHRs as a combination of biomedical termi-
nology in an underresourced language and a source
of valuable health-care data makes them attractive
for various medical and language research tasks.
We present an algorithm which comprises machine
learning (ML) techniques and rule-based analysis to
automatically identify phrases and paraphrases, for
which no ?canonical forms? exist in any dictionary,
with minimal effort. We analyse anonymous EHRs
of patients diagnosed with diabetes.
We focus on extracting the levels of blood sugar
and body weight change (examples are given in ta-
ble 1) which are some of the dominant factors when
diagnosing diabetes but we believe this approach can
extend to recognise also other symptoms or medica-
tion expressions which have similar record structure.
We extract information which is on one hand very
important for the professionals and on the other hand
not directly observable in a collection of unstruc-
tured documents because of its composite mean-
ing. In Bulgarian EHRs laboratory data is some-
times present inline in the text only and means for
extracting such information from the plain text mes-
sage are often needed.
The paper is structured as follows: section 2
presents related studies, section 4 describes the
method, and section 3 the experiments. The results
are given in section 5 and the conclusion in section 6.
2 Related Work
There are several successful systems for identifying
patient characteristics and health conditions, mostly
in English documents. The one presented by Savova
et al (2008) solves the task of identifying the smok-
ing status of patients by accurately classifying in-
dividual sentences from the patient records. They
achieve F-measure 85.57. One of the limitations is
the lack of negation detection. Similarly to their ap-
proach our source documents are decomposed into
sentences which are to be classified. The symptom
23
descriptions are short and always written within a
single sentence, therefore it is important to filter out
the irrelevant sentences. We employ ML techniques
and rule-based analysis and in addition deal with
negation detection.
Harkema et al (2009) presents an algorithm
called ConText, which determines whether clinical
conditions mentioned in clinical reports are negated,
hypothetical, historical, or experienced by someone
other than the patient. The system is entirely rule-
based and infers the status of a condition from sim-
ple lexical clues occurring in the context of the con-
dition. This algorithm proves successful in process-
ing different clinical report types with F-measure for
negation (75-95%), historical (22-84%), hypotheti-
cal (86-96%) and experiencer (100%) depending on
the report types. Our work rests on a similar idea ?
we prepare a set of vocabularies which are learned
from data and are used for determining the scope of
the expressions of interest but we focus on extracting
health conditions, their status, values and negation.
Negation is one of the most important features to
be recognized in medical texts. There is a work for
Bulgarian by Boytcheva (2005) which specifically
tackles the negation by the presence of triggering ex-
pression as we do too.
Many systems implement isolated condition iden-
tification and rarely complete semantic model of
all conditions, e.g. MedLEE (Friedman, 1994),
MEDSYNDIKATE (Hahn, 2002) etc. identify the
status condition and also modifying information like
anatomic location, negation, change over time. In
Boytcheva et al (2010) the authors extract from Bul-
garian EHRs the status of the patient skin, limbs, and
neck with thyroid gland with high accuracy.
3 Experimental Data
Source Data This work is done on free text EHRs
of diabetic patients submitted by the Endocrinol-
ogy Hospital of the Medical University in Sofia.
The health conditions are written in the case history
which describes the diabetes development, compli-
cations, their corresponding treatment, etc. Symp-
tom descriptions are written within a single sen-
tence (sometimes other symptoms are described in
the same sentence too) as shown in table 1.
Our training corpus is a subset of anamnesis sen-
Ex. 1. Pri izsledvane krvnata zahar e bila -
14 mmol/l. (After examination the blood sugar was
- 14 mmol/l.)
Ex. 2. Postypva po povod na poliuriqno-
polidipsiqen sindrom, redukci na tegloto i
ketoacidoza. (Enters hospital because of polyuria-
polydipsia syndrome, weight reduction and ketoacido-
sis.)
Table 1: Examples of symptom descriptions.
tences regarding only symptom descriptions. It is
annotated with symptom type on sentence level and
with symptom description on token level. These are
excerpts from from 100 epicrises. All sentences are
marked with class ?bs? (blood sugar), ?bwc? (body
weight change) or another symptom. The sentences
that describe more symptoms have more than one la-
bel. These data was used for learning the rules and
the vocabularies. The experimental/test dataset con-
sists of 2031 anamnesis sentences annotated with
symptoms. The documents are manually sentence
split and automatically tokenized. To overcome the
inflexion and gain a wider coverage of the rules we
also use stemmed forms (Nakov, 2010).
Vocabularies The algorithm relies on a set of spe-
cific vocabularies manually built from the anno-
tated training set. We build a Focal Term Vocab-
ulary which contains words and phrases signalling
the presence of the health condition description (e.g.
?glycemic control?, ?hypoglycemia? etc.). It is used
for defining the condition in phase 2. All single
words which appear in this vocabulary except for the
stop words form the so called Key Term Vocabulary
used in the phase 1 classification task.
There are two vocabularies containing border
terms: one with rightmost context border expres-
sions (Right Border Vocabulary); and one with left
border expressions (Left Border Vocabulary). These
are conjunctions and phrases separating the blood
sugar level description from another observation
preceding it. Both vocabularies are sorted in de-
scending order by the probability of occurrence as-
sociated with each expression as border term.
A Vocabulary of Negation Expressions is also
compiled as well as a Vocabulary of Condition
Statuses (e.g. ?good?, ?bad?, ?increased? etc.).
24
4 Methodology
We aim at identifying health conditions in the EHR
case history. The problem can be broken down into
the following subtasks: Phase 1: identify the rele-
vant sentences; Phase 2: identify the condition and
its status; Phase 3: identify the values related to the
symptom of interest - mmol/l, kg etc.; Phase 4: iden-
tify negation; Phase 5: identify the scope of the de-
scription - match left and right border terms.
Two experiments for accomplishing phase 1 have
been carried out: a rule-based one and ML-based
one. In the ML setting we train a binary classifica-
tion algorithm. We experiment with 3 feature sets:
(i) all tokens in the corpus; (ii) the tokens from Key
Term Vocabulary and (iii) restricted subset of the
Key Term Vocabulary. In all cases each sentence
is considered a document and each document fea-
ture vector contains the following boolean values for
each feature: the feature value is true iff the docu-
ment contains the corresponding token from the fea-
ture set, otherwise it is false. In this setting we use
the experimental corpus which we split in folds for
training and testing and the vocabularies which are
learned from the training corpus.
In the rule-based experiment, we construct light-
weight regular expressions that match symptom de-
scriptions in the training set. We model them in con-
text window of up to 5-7 tokens to the left and right
of the focal terms depending on the kind of expres-
sion. When composing the rules like in figure 1 we
introduce new links between tokens which are not
subsequent in the training dataset, if the newly cre-
ated token sequences would be meaningful focal ex-
pressions. The black edges are obtained from the
training corpus and the dashed grey one is manually
added. This approach would not harm any identifi-
cation procedure because it can match only an ex-
isting sequence in the target text therefore we can
only benefit from such augmented rules. Moreover
these rules are crafted for stemmed text which par-
tially overcomes the morphological agreement prob-
lem (Bulgarian is a highly inflective language) thus
they have wider coverage on the possible signalling
words (see table 2). The sentences matching these
rules are passed to phase 2.
???????? ?????
blood sugar
?????
??????
?????
morning
high
very ?????
Figure 1: Adding new edges between tokens.
krvn[ai](t)? zahar (the blood sugar)
((nezadovolitelen) OR (dobr) OR (lox)
OR (otliq)) (glikemiq kontrol) (not satisfactory
OR good OR bad OR excellent glycemic control)
Table 2: Phase 1 rules after stemming.
At phase 2 the condition status is recognised. The
blood sugar level is most often cited as low, high
or normal and could be also bad or good, body
weight can be increased or decreased. The context
words which signal the status of the condition appear
on the left side of the focal terms, such as: s vi-
soki sto$inosti na kr. zahar (with high values of
the blood sugar); lox glikemiqen kontrol (bad
glycemic control).
Phase 3 analysis is related to the dynamic exten-
sion of the right context of the analysed expression
in order to cover all necessary attributes. At this
phase we aim at identifying the value of the blood
sugar test if there is such. The values of this test are
given in various ways ? as an interval of values; as
a maximal value reached during some period or a
concrete value. At this step we apply rules matching
vocabulary words signalling the type of value rep-
resentation e.g. medu (between); do (up to); nad
(above); okolo (around).
When the algorithm recognises a word signalling
interval value representation such as medu (be-
tween), it takes action to expand the right context
to the next two numbers and measuring unit af-
ter the second one, but with no more than 7 to-
kens. If the numbers fall out of this 7-token window
they are ignored and the value identification algo-
rithm fails. We determined the 7-token window ex-
perimentally by analysing the training set of EHRs
where often verbs expressing temporality are con-
necting/separating the focal terms from the ones de-
scribing lab test values (as shown in table 3).
25
krvnozaharna sto$inost do 10-11 mmol/l
(bloodsugar level up to 10-11 mmol/l)
sto$inostite na krvnata zahar sa bili (medu
4 i 6,5 mmol/l) (level of the blood sugar has been
between 4) (and 6,5 mmol/l)
Table 3: Recognition of lab test values.
In phase 4 we recognise negation. We observe
only limited occurrences of negations in the text.
This is due to the fact that in Bulgarian prac-
tice mostly medical conditions with pathological
changes are described. The expressions signalling
negation appear on the left context of the phrases
marked at phase 1 and they modify the expres-
sions identified at phase 2. Some examples are:
ne sobwava za... (does not inform about...); ne
[mnogo] visoki sto$inosti na ... (not [very] high
values of...).
Phase 5 identifies the symptom description scope.
It is determined by the context words which signal
the beginning of the expression, its ending and the
already identified attributes. The expression of in-
terest either starts at the beginning of the sentence or
follows another description and conjunctions. The
end of the expression is either coinciding with the
end of the sentence, or is signalled by a value of the
blood sugar test, or a description of another symp-
tom (see table 4). The border identification rules
are applied on the right and on the left of the al-
ready identified attributes starting from the rule hav-
ing highest probability and continue in descending
order until a match is found. If no match is found in
7-token context window the right border is consid-
ered the right most token of the current expression
and the left border of the expression is either the first
token of the focal term or negation of the expression
or status of the condition.
5 Evaluation
5.1 Phase 1 - Rules vs ML
The evaluation of our approach is performed from
several different perspectives. We compare text clas-
sification versus rule-based approach at phase 1. In
the ML setting each input document (meaning each
sentence) has a boolean feature vector representing
the presence of each token of the feature set in that
Beginning of expressions of interest
pri krvna zahar... (with blood sugar...)
na fona na lox glikemiqen kontrol... (on the
background of bad glycemic control...)
s visoki sto$inosti na krvnata zahar... (with
high values of the blood sugar...)
Ending of expressions of interest
...krvna zahar - 14 mmol/l. (...blood sugar - 14
mmol/l.)
...lox glikemiqen kontrol i ketoacidoza.
(...bad clycemic control and ketoacidosis.)
Table 4: Beginning and ending of expressions.
sentence. The concrete attribute position xi is false
if the sentence does not contain the corresponding
feature token and is true if it contains it.
The applied classification algorithm is a standard
J48 decision tree which we consider appropriate,
given the fact we supply binary data (Visa et al,
2007). We used Weka Data Mining Software (Hall,
2007) for performing the tests. The results with best
settings are shown in table 5.
To achieve these results we did several experi-
ments on the test set, using the features selected
from the training set. The initial test was done
with a feature set comprising all tokens in the text
collection except for stop words. The achieved F-
measure was about 82 in 10-fold cross-validation, to
89% in isolated experiments and up to 92% on bal-
anced datasets. The precision was as high as 92%
and the recall varying from 73 to 85% in the dif-
ferent symptoms. In the second round the feature
set contained only tokens from the Key Term Vo-
cabulary. This boosted up the classification perfor-
mance to 90% F-measure for blood sugar and body
weight change. When we restricted the feature space
once again leaving only the most significant symp-
tom words in the feature space the performance was
about 89% F-measure. In all cases the precision var-
ied about 92-94%, and up to 98% when classifying
blood sugar level with the full keyword set, which
is encouraging. At that time the recall was about
75% in blood sugar identification and this could be
explained with the highly imbalanced dataset. Only
about 20% of the sentences were blood sugar related
and 6% body weight change related. These results
26
Method % Precision Recall F-measure
J48 bs 22 feat. 94.80 80.00 86.80
J48 bwc 16 feat. 94.30 85.30 89.60
Rule-based bs 96.40 90.00 93.09
Rule-based bwc 98.50 92.00 95.14
Table 5: Level 1 evaluation. ML vs Rule-based best per-
formance.
Phase Precision Recall F-measure
Blood sugar (bc)
Ph.1 Focus 96.4 90.0 93.09
Ph.2 Status 91 45.5 60.6
Ph.3 Values 88.9 77.8 83
Ph.4 Neg. 96.3 94.2 95.2
Ph.5 Scope 97 96 96.5
Body weight change (bwc)
Ph.1 Focus 96.6 90.6 93.5
Ph.2 Status 86.2 78.1 82
Ph.3 Values 87.5 70 77.8
Ph.4 Neg. NA NA NA
Ph.5 Scope 82.7 75 78.7
Table 6: Rule performance by level
show that even without introducing domain knowl-
edge and using the full feature space the positive out-
put predictions are reliable. SVM classification was
also tested but it was outperformed by J48.
Table 5 shows that the precision of the rule-based
approach is higher than the one obtained by auto-
matic classification. However during the error anal-
ysis we noticed that in the rule-based setting some
true positives were wrongly classified as such be-
cause they matched non symptom related expres-
sions in sentences where the symptoms occur and re-
spectively are annotated as positive. In means of pre-
cision both approaches differ only in about 2 points
which invokes the assumption that they are compa-
rable to each other and could be used as alternatives
for experiments on a larger scale even without in-
corporating domain knowledge, especially in such
a task where the accuracy of the extraction is more
important than the coverage.
5.2 Phase by Phase Evaluation
Results from the separate phases of rule-based anal-
ysis are shown in table 6.
At phase 2 the tokens available in the training set
are completely recognised; there is a group of to-
kens which are not available in the training set, but
during the phase 1 processing fall into the scope of
the expression of interest. These ones are included
to the condition description without having assigned
any status class. Tokens may not be identified for
two reasons ? they are not available in the training
set or they are misplaced (e.g. the target adjective is
following the focal expression instead of preceding
it, as it happens in all training set examples). 45%
of the attributes expressing blood sugar status are
recognised and 78.1% espressing body weight. Al-
though the recall for blood sugar seems to be low at
this phase, the result is actually good because dur-
ing the error analysis we found out that 60% of the
tokens which were not identified were equivalent.
At phase 3 the main problem for value recogni-
tion were the alphanumerical expressions of lab test
values which occur comparatively rare and have a
wide range of spelling variants (and errors). Thus
few extraction errors have high influence on the pre-
cision. This problem can be easily overcome by pre-
generating a list of alphanumeric expressions and
their variations. The negation at phase 4 was recog-
nised with high accuracy.
At phase 5 all scope problems for blood sugar re-
lated expressions are resolved successfully except
for one. The interval describing the value of the
blood sugar was written as ?ot 12 mmol/l do 14
mmol/l? (from 12 mmol/l to 14 mmol/l) instead of
?from 12 to 14 mmol/l? like all such examples in
the training set. This lead to wrongly recognised
right border and only partial recognition of the blood
sugar level value. However this issue could be eas-
ily overcome by extending the recognition rules with
additional ?cosmetic? clauses for processing of al-
phanumeric values as suggested above. It would be
helpful for recognition of any symptom to add new
lexical alternations and paraphrases in addtion to the
stemmed forms in the regex. Our approach is com-
pletely driven by the training set analysis because
our goal is to see how far do we get on that base.
The extension of the rules as shown on figure 1
helped identifying blood sugar descriptions twice.
We believe that such extensions in feature will have
higher impact on a larger scale experiment.
27
6 Conclusion and Future Work
We proposed a unified approach to the recogni-
tion of medical descriptions with composite mean-
ing, which are represented by a wide range of para-
phrases in the free EHR texts in Bulgarian. The re-
sults show a relatively high precision in identifying
health condition descriptions in the EHR texts. This
was achieved with the use of shallow rules and mi-
nor additional effort to extend the rules coverage -
stemming of the source documents and adding new
meaningful links to the rules where possible. The
sentence identification task has nearly the same ac-
curacy in terms of precision when performed with a
binary J48 classifier and with the rule-based phase 1
analysis even without incorporating key terms in the
classification. These results give an insight into the
possibilities of a further usage of automatic classifi-
cation for such tasks, due to its flexibility.
As a follow up to this study we will try to gener-
alise this algorithm to a more abstract level so that
it can be transferable for the identification of other
health conditions, medication etc. We will also put
effort in the automatic extraction of symptom identi-
fication rules by analysing the classification predic-
tions and the corresponding document feature vec-
tors.
Acknowledgments
The research work presented in this paper is partly
supported by grant DO 02-292/December 2008 ?Ef-
fective search of conceptual information with appli-
cations in medical informatics?, funded by the Bul-
garian National Science Fund in 2009-2012 (EV-
TIMA).
References
Boytcheva, S., A. Strupchanska, E. Paskaleva, D.
Tcharaktchiev, 2005. Some Aspects of Negation
Processing in Electronic Health Records. In Proc.
Int. Workshop LSI in the Balkan Countries, 2005,
Borovets, Bulgaria, pp. 1-8.
Boytcheva S., I. Nikolova, E. Paskaleva, G. Angelova,
D. Tcharaktchiev and N. Dimitrova, 2010. Obtaining
Status Descriptions via Automatic Analysis of Hospital
Patient Records. Informatica, 34(3):269-278.
Chapman, W., W. Bridewell, P. Hanbury, G. Cooper and
B. Buchanan, 2001. A simple Algorithm for Identify-
ing Negated Findings and Diseases in Discharge Sum-
maries. J Biomed Inf, 34(5):301-310.
Chapman D. Chu, J.N. Dowling and W.W. Chapman,
2006. Evaluating the Effectiveness of Four Contex-
tual Features in Classifying Annotated Clinical Condi-
tions in Emergency Department Reports. AMIA Annu
Symp Proc, pp. 141-145.
Elkin, P.L., S.H. Brown, B.A. Bauer, C.S. Husser, W.
Carruth and L.R. Bergstrom, et al, 2005. A Con-
trolled Trial of Automated Classification of Negation
From Clinical Notes. BMC Med Inform Decis Mak,
2005, 5(1), p. 13.
Friedman, C., P.O. Alderson, J.H. Austin, J.J. Cimino and
S.B. Johnson, 1994. A General Natural-Language
Text Processor for Clinical Radiology. JAMIA, 1994
Mar-Apr, 1(2), pp. 161-74.
Hall, M., E. Frank, G. Holmes, B. Pfahringer, P. Reute-
mann, I. H. Witten, 2009. The WEKA Data Mining
Software: An Update; SIGKDD Explorations, 11(1).
Harkema, H., J. Dowling, T. Thornblade, W. Chapman,
2009. ConText: An Algorithm for Determining Nega-
tion, Experiencer, and Temporal Status from Clinical
Reports. J Biomed Inf, 2009, 42(5), pp. 839-51.
Hahn, U., M. Romacker and S. Schulz, 2002. MEDSYN-
DIKATE - a Natural Language System for the Extrac-
tion of Medical Information from Findings Reports.
Int J Med Inf, 2002, 67(1-3), pp. 63-74.
Huang, Y. and H.J. Lowe, A Novel Hybrid Approach to
Automated Negation Detection in Clinical Radiology
Reports. JAMIA, 2007, 14(3), pp. 304-11.
Mutalik, P., A. Deshpande, P. Nadkarni, Use of General-
purpose Negation Detection to Augment Concept In-
dexing of Medical Documents: a Quantitative Study
using the UMLS. JAMIA, 2001, 8(6), pp. 598-609.
Nakov, P., 2003. BulStem: Design and Evaluation
of Inflectional Stemmer for Bulgarian. In Proc. of
Workshop on Balkan Language Resources and Tools
(1st Balkan Conference in Informatics), Thessaloniki,
Greece, November, 2003.
Savova G., P. Ogren, P. Duffy, J. Buntrock, C. Chute,
2008. Mayo Clinic NLP System for Patient Smoking
Status Identification JAMIA, 2008, 15(1), pp. 25-28.
Visa, S., A. Ralescu, M. Ionescu, 2007. Investigating
Learning Methods for Binary Data In Proc. Fuzzy In-
formation Processing Society, 2007. NAFIPS ?07. An-
nual Meeting of the North American June 2007, pp.
441-445
Project EVTIMA ? ?Effective search of conceptual in-
formation with applications in medical informatics?,
http://www.lml.bas.bg/evtima
28
